(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Profile"],{"66aa":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"hero"},[s("div",{staticClass:"hero-head"},[s("breadcrumb",{attrs:{items:[{link:{name:"profile"},icon:"fa-user",text:"Profile",isActive:!0}]}})],1),s("div",{staticClass:"hero-body has-padding-horizontal-7"},[s("div",{staticClass:"container"},[s("div",{staticClass:"card has-margin-bottom-6"},[e._m(0),s("section",{staticClass:"card-content"},[s("div",{staticClass:"field"},[s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.login,expression:"user.login"}],staticClass:"input",attrs:{type:"text",placeholder:"Nom d'utilisateur"},domProps:{value:e.user.login},on:{input:function(t){t.target.composing||e.$set(e.user,"login",t.target.value)}}}),e._m(1)])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"input",attrs:{type:"email",placeholder:"Adresse mail"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),e._m(2)])]),s("div",{staticClass:"field"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-primary",on:{click:e.updateUser}},[e._m(3),s("span",[e._v("Sauvegarder")])])])])])]),s("div",{staticClass:"card has-margin-bottom-6"},[e._m(4),s("section",{staticClass:"card-content"},[s("div",{staticClass:"field has-addons"},[s("div",{staticClass:"control has-icons-left is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"input",attrs:{type:"password",placeholder:"Password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),e._m(5)]),s("div",{staticClass:"control"},[s("button",{staticClass:"button is-primary",on:{click:e.updatePassword}},[e._m(6),s("span",[e._v("Sauvegarder")])])])]),s("table",{staticClass:"table is-fullwidth"},[e._m(7),s("tbody",e._l(e.tokens,(function(t){return s("tr",{key:t.id},[s("td",[e._v(e._s(e._f("moment")(t.issuedDate,"LLLL")))]),s("td",[e._v(e._s(t.userAgent))]),s("td",[e._v(e._s(t.ip))]),s("td",{staticClass:"has-text-centered"},[s("button",{staticClass:"button is-danger is-light is-small",on:{click:function(s){return e.deleteToken(t.id)}}},[s("i",{staticClass:"fa fa-trash"})])])])})),0)])])])])])])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-user-edit"})]),s("span",[e._v("Mes informations")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-user"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-envelope"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-save"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-user-shield"})]),s("span",[e._v("Sécurité")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-small is-left"},[s("i",{staticClass:"fas fa-key"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fa fa-save"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("thead",[s("tr",[s("th",[e._v("Date d'autorisation")]),s("th",[e._v("User agent")]),s("th",[e._v("Adresse IP")]),s("th",{staticClass:"has-text-centered"},[e._v("Révoquer")])])])}],n=(s("c740"),s("a434"),s("96cf"),s("1da1")),i=s("5530"),c=s("2fbc"),o=s("2f62"),l=Object(o["a"])("app"),u=l.mapState,d={name:"Profile",components:{Breadcrumb:c["a"]},data:function(){return{user:{},tokens:[]}},computed:Object(i["a"])({},u(["id"])),mounted:function(){this.getProfile(),this.getTokens()},methods:{getProfile:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Provider.getUser(e.id);case 2:e.user=t.sent;case 3:case"end":return t.stop()}}),t)})))()},getTokens:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Provider.getUserTokens(e.id);case 2:e.tokens=t.sent;case 3:case"end":return t.stop()}}),t)})))()},updateUser:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=Object.assign({},e.user),delete s.password,delete s.modificationDate,t.prev=3,t.next=6,e.$Provider.updateUser(s);case 6:e.user=t.sent,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](3),console.error(t.t0),e.$store.commit("app/setInformation",{type:"is-danger",message:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[3,9]])})))()},updatePassword:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$Provider.updateUserPassword(e.user.id,e.user.password);case 3:e.user.password=void 0,t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0),e.$store.commit("app/setInformation",{type:"is-danger",message:t.t0.message});case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},deleteToken:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,t.$Provider.deleteUserToken(t.id,e);case 3:t.tokens.splice(t.tokens.findIndex((function(t){return t.id===e})),1),s.next=10;break;case 6:s.prev=6,s.t0=s["catch"](0),console.error(s.t0),t.$store.commit("app/setInformation",{type:"is-danger",message:s.t0.message});case 10:case"end":return s.stop()}}),s,null,[[0,6]])})))()}}},p=d,m=s("2877"),f=Object(m["a"])(p,a,r,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=Profile.3d73082f.js.map