{"version":3,"sources":["webpack:///./src/components/Profile.vue?dc67","webpack:///src/components/Profile.vue","webpack:///./src/components/Profile.vue?6e70","webpack:///./src/components/Profile.vue","webpack:///./src/mixins/UnsavedChangesGuard.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","link","name","icon","text","isActive","_m","directives","rawName","value","user","expression","domProps","on","$event","target","composing","$set","updateProfile","_v","updatePassword","_l","token","key","id","_s","_f","issuedDate","userAgent","ip","deleteToken","staticRenderFns","components","Breadcrumb","mixins","data","tokens","computed","mounted","getProfile","getTokens","methods","component","UnsavedChangesGuardMixin","beforeRouteUpdate","to","from","next","askConfirmation","then","catch","beforeRouteLeave","beforeMount","window","addEventListener","preventClose","beforeDestroy","removeEventListener","hasUnsavedChanges","unwatch","addUnsavedChangesGuard","watched","removeUnsavedChangesGuard","$watch","deep","event","returnValue","Promise","resolve","reject","$buefy","dialog","confirm","type","title","message","hasIcon","iconPack","confirmText","cancelText","onConfirm","onCancel","Error"],"mappings":"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","file":"js/Profile.6dd5e687.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"hero\"},[_c('div',{staticClass:\"hero-head\"},[_c('breadcrumb',{attrs:{\"items\":[{link: {name: 'profile'}, icon: 'fa-user', text: 'Profile', isActive: true}]}})],1),_c('div',{staticClass:\"hero-body px-3\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"card mb-4\"},[_vm._m(0),_c('section',{staticClass:\"card-content\"},[_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control has-icons-left\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.login),expression:\"user.login\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"Nom d'utilisateur\"},domProps:{\"value\":(_vm.user.login)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"login\", $event.target.value)}}}),_vm._m(1)])]),_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control has-icons-left\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.email),expression:\"user.email\"}],staticClass:\"input\",attrs:{\"type\":\"email\",\"placeholder\":\"Adresse mail\"},domProps:{\"value\":(_vm.user.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"email\", $event.target.value)}}}),_vm._m(2)])]),_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control\"},[_c('button',{staticClass:\"button is-primary\",on:{\"click\":_vm.updateProfile}},[_vm._m(3),_c('span',[_vm._v(\"Sauvegarder\")])])])])])]),_c('div',{staticClass:\"card mb-4\"},[_vm._m(4),_c('section',{staticClass:\"card-content\"},[_c('div',{staticClass:\"field has-addons\"},[_c('div',{staticClass:\"control has-icons-left is-expanded\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.password),expression:\"user.password\"}],staticClass:\"input\",attrs:{\"type\":\"password\",\"placeholder\":\"Password\"},domProps:{\"value\":(_vm.user.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"password\", $event.target.value)}}}),_vm._m(5)]),_c('div',{staticClass:\"control\"},[_c('button',{staticClass:\"button is-primary\",on:{\"click\":_vm.updatePassword}},[_vm._m(6),_c('span',[_vm._v(\"Sauvegarder\")])])])]),_c('table',{staticClass:\"table is-fullwidth\"},[_vm._m(7),_c('tbody',_vm._l((_vm.tokens),function(token){return _c('tr',{key:token.id},[_c('td',[_vm._v(_vm._s(_vm._f(\"moment\")(token.issuedDate,'LLLL')))]),_c('td',[_vm._v(_vm._s(token.userAgent))]),_c('td',[_vm._v(_vm._s(token.ip))]),_c('td',{staticClass:\"has-text-centered\"},[_c('button',{staticClass:\"button is-danger is-light is-small\",on:{\"click\":function($event){return _vm.deleteToken(token.id)}}},[_c('i',{staticClass:\"fa fa-trash\"})])])])}),0)])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"card-header\"},[_c('p',{staticClass:\"card-header-title\"},[_c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-user-edit\"})]),_c('span',[_vm._v(\"Mes informations\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon is-small is-left\"},[_c('i',{staticClass:\"fas fa-user\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon is-small is-left\"},[_c('i',{staticClass:\"fas fa-envelope\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-save\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"card-header\"},[_c('p',{staticClass:\"card-header-title\"},[_c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-user-shield\"})]),_c('span',[_vm._v(\"Sécurité\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon is-small is-left\"},[_c('i',{staticClass:\"fas fa-key\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-save\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"Date d'autorisation\")]),_c('th',[_vm._v(\"User agent\")]),_c('th',[_vm._v(\"Adresse IP\")]),_c('th',{staticClass:\"has-text-centered\"},[_vm._v(\"Révoquer\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"hero\">\n    <div class=\"hero-head\">\n      <breadcrumb :items=\"[{link: {name: 'profile'}, icon: 'fa-user', text: 'Profile', isActive: true}]\" />\n    </div>\n    <div class=\"hero-body px-3\">\n      <div class=\"container\">\n\n        <div class=\"card mb-4\">\n          <header class=\"card-header\">\n            <p class=\"card-header-title\">\n              <span class=\"icon\"><i class=\"fa fa-user-edit\" /></span><span>Mes informations</span>\n            </p>\n          </header>\n          <section class=\"card-content\">\n            <div class=\"field\">\n              <div class=\"control has-icons-left\">\n                <input v-model=\"user.login\" class=\"input\" type=\"text\" placeholder=\"Nom d'utilisateur\">\n                <span class=\"icon is-small is-left\">\n                  <i class=\"fas fa-user\" />\n                </span>\n              </div>\n            </div>\n            <div class=\"field\">\n              <div class=\"control has-icons-left\">\n                <input v-model=\"user.email\" class=\"input\" type=\"email\" placeholder=\"Adresse mail\">\n                <span class=\"icon is-small is-left\">\n                  <i class=\"fas fa-envelope\" />\n                </span>\n              </div>\n            </div>\n            <div class=\"field\">\n              <div class=\"control\">\n                <button class=\"button is-primary\" @click=\"updateProfile\">\n                  <span class=\"icon\"><i class=\"fa fa-save\" /></span><span>Sauvegarder</span>\n                </button>\n              </div>\n            </div>\n          </section>\n        </div>\n\n        <div class=\"card mb-4\">\n          <header class=\"card-header\">\n            <p class=\"card-header-title\">\n              <span class=\"icon\"><i class=\"fa fa-user-shield\" /></span><span>Sécurité</span>\n            </p>\n          </header>\n          <section class=\"card-content\">\n            <div class=\"field has-addons\">\n              <div class=\"control has-icons-left is-expanded\">\n                <input v-model=\"user.password\" class=\"input\" type=\"password\" placeholder=\"Password\">\n                <span class=\"icon is-small is-left\">\n                  <i class=\"fas fa-key\" />\n                </span>\n              </div>\n              <div class=\"control\">\n                <button class=\"button is-primary\" @click=\"updatePassword\">\n                  <span class=\"icon\"><i class=\"fa fa-save\" /></span><span>Sauvegarder</span>\n                </button>\n              </div>\n            </div>\n            <table class=\"table is-fullwidth\">\n              <thead>\n                <tr>\n                  <th>Date d'autorisation</th>\n                  <th>User agent</th>\n                  <th>Adresse IP</th>\n                  <th class=\"has-text-centered\">Révoquer</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"token in tokens\" :key=\"token.id\">\n                  <td>{{ token.issuedDate | moment('LLLL') }}</td>\n                  <td>{{ token.userAgent }}</td>\n                  <td>{{ token.ip }}</td>\n                  <td class=\"has-text-centered\"><button class=\"button is-danger is-light is-small\" @click=\"deleteToken(token.id)\"><i class=\"fa fa-trash\" /></button></td>\n                </tr>\n              </tbody>\n            </table>\n          </section>\n\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport Breadcrumb from '@/components/Breadcrumb'\nimport { UnsavedChangesGuardMixin } from '@/mixins/UnsavedChangesGuard'\nimport { createNamespacedHelpers } from 'vuex'\nconst { mapState } = createNamespacedHelpers('app')\n\nexport default {\n  name: 'Profile',\n  components: {\n    Breadcrumb,\n  },\n  mixins: [\n    UnsavedChangesGuardMixin,\n  ],\n  data () {\n    return {\n      user: {},\n      tokens: [],\n    }\n  },\n  computed: {\n    ...mapState(['id']),\n  },\n  mounted () {\n    this.getProfile()\n    this.getTokens()\n  },\n  methods: {\n    async getProfile () {\n      try {\n        this.user = await this.$Provider.getMyProfile()\n        this.addUnsavedChangesGuard('user')\n      } catch (error) {\n        this.$store.commit('app/setInformation', { type: 'is-danger', message: `Erreur lors de la récupération du profil<br/>${error.message}` })\n      }\n    },\n    async getTokens () {\n      try {\n        this.tokens = await this.$Provider.getMyTokens()\n      } catch (error) {\n        this.$store.commit('app/setInformation', { type: 'is-danger', message: `Erreur lors de la récupération des tokens<br/>${error.message}` })\n      }\n    },\n    async updateProfile () {\n      const _user = Object.assign({}, this.user)\n      delete _user.password\n      delete _user.modificationDate\n      try {\n        this.user = await this.$Provider.updateMyProfile(_user)\n        this.addUnsavedChangesGuard('user')\n      } catch (error) {\n        this.$store.commit('app/setInformation', { type: 'is-danger', message: error.message })\n      }\n    },\n    async updatePassword () {\n      try {\n        await this.$Provider.updateMyPassword(this.user.password)\n        this.user.password = undefined\n        this.addUnsavedChangesGuard('user')\n      } catch (error) {\n        this.$store.commit('app/setInformation', { type: 'is-danger', message: error.message })\n      }\n    },\n    async deleteToken (tokenId) {\n      this.$buefy.dialog.confirm({\n        type: 'is-danger',\n        title: 'Confirmation de suppression',\n        message: '<p>Le jeton sera supprimé.</p><p>Souhaitez-vous continuer ?</p>',\n        hasIcon: true,\n        icon: 'trash',\n        iconPack: 'fa',\n        confirmText: 'Supprimer',\n        cancelText: 'Annuler',\n        onConfirm: async () => {\n          try {\n            await this.$Provider.deleteMyToken(tokenId)\n            this.tokens.splice(this.tokens.findIndex((token) => token.id === tokenId), 1)\n          } catch (error) {\n            this.$store.commit('app/setInformation', { type: 'is-danger', message: error.message })\n          }\n        },\n      })\n    },\n  },\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=ac2616d4&\"\nimport script from \"./Profile.vue?vue&type=script&lang=js&\"\nexport * from \"./Profile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export const UnsavedChangesGuardMixin = {\n  beforeRouteUpdate (to, from, next) {\n    // handle application navigation to same component with other params\n    this.askConfirmation()\n      .then(() => {\n        return next()\n      })\n      .catch(() => {\n        return next(false)\n      })\n  },\n  beforeRouteLeave (to, from, next) {\n    // handle application navigation to another component\n    this.askConfirmation()\n      .then(() => {\n        return next()\n      })\n      .catch(() => {\n        return next(false)\n      })\n  },\n  beforeMount () {\n    // handle browser navigation\n    window.addEventListener('beforeunload', this.preventClose)\n  },\n  beforeDestroy () {\n    window.removeEventListener('beforeunload', this.preventClose)\n  },\n  data () {\n    return {\n      hasUnsavedChanges: false,\n      unwatch: null,\n    }\n  },\n  methods: {\n    addUnsavedChangesGuard (watched) {\n      this.removeUnsavedChangesGuard()\n      this.unwatch = this.$watch(\n        watched,\n        () => {\n          this.hasUnsavedChanges = true\n        },\n        { deep: true },\n      )\n    },\n    removeUnsavedChangesGuard () {\n      if (this.unwatch) {\n        this.unwatch()\n        this.unwatch = null\n        this.hasUnsavedChanges = false\n      }\n    },\n    preventClose (event) {\n      if (this.hasUnsavedChanges) {\n        event.returnValue = 'Modifications non enregistrées'\n      }\n    },\n    askConfirmation () {\n      return new Promise((resolve, reject) => {\n        if (!this.hasUnsavedChanges) {\n          return resolve()\n        }\n        this.$buefy.dialog.confirm({\n          type: 'is-danger',\n          title: 'Modifications non enregistrées',\n          message: '<p>Vos changements seront perdus si vous quittez la page.</p><p>Souhaitez-vous continuer ?</p>',\n          hasIcon: true,\n          icon: 'save',\n          iconPack: 'fa',\n          confirmText: 'Quitter la page',\n          cancelText: 'Rester sur la page',\n          onConfirm: () => resolve(),\n          onCancel: () => reject(new Error('cancel')),\n        })\n      })\n    },\n  },\n}\n"],"sourceRoot":""}