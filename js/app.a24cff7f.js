(function(e){function t(t){for(var a,r,o=t[0],u=t[1],c=t[2],l=0,m=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);d&&d(t);while(m.length)m.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,r=1;r<n.length;r++){var o=n[r];0!==i[o]&&(a=!1)}a&&(s.splice(t--,1),e=u(u.s=n[0]))}return e}var a={},r={app:0},i={app:0},s=[];function o(e){return u.p+"js/"+({About:"About",Admin:"Admin",Notifications:"Notifications",Profile:"Profile",Rain:"Rain",Scenarios:"Scenarios"}[e]||e)+"."+{About:"cd4af051",Admin:"e89f18ab",Notifications:"a2bc129e",Profile:"3d73082f",Rain:"3eb6d4aa",Scenarios:"26bd6e7f"}[e]+".js"}function u(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={Admin:1,Rain:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var a="css/"+({About:"About",Admin:"Admin",Notifications:"Notifications",Profile:"Profile",Rain:"Rain",Scenarios:"Scenarios"}[e]||e)+"."+{About:"31d6cfe0",Admin:"d34831d6",Notifications:"31d6cfe0",Profile:"31d6cfe0",Rain:"5e6a8cde",Scenarios:"31d6cfe0"}[e]+".css",i=u.p+a,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var c=s[o],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===a||l===i))return t()}var m=document.getElementsByTagName("style");for(o=0;o<m.length;o++){c=m[o],l=c.getAttribute("data-href");if(l===a||l===i)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||i,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete r[e],d.parentNode.removeChild(d),n(s)},d.href=i;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){r[e]=0})));var a=i[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,n){a=i[e]=[t,n]}));t.push(a[2]=s);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=o(e);var m=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=i[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;m.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",m.name="ChunkLoadError",m.type=a,m.request=r,n[1](m)}i[e]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=a,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)u.d(n,a,function(t){return e[t]}.bind(null,a));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var m=0;m<c.length;m++)t(c[m]);var d=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"07fc":function(e,t,n){"use strict";n("68f1")},"0b92":function(e,t,n){var a={"./CustomComponent":["167f"],"./CustomComponent.vue":["167f"],"./GenericComponent":["cd32"],"./GenericComponent.vue":["cd32"],"./LoadingComponent":["d09c"],"./LoadingComponent.vue":["d09c"],"./Rain":["2dec","Rain"],"./Rain.vue":["2dec","Rain"]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id="0b92",e.exports=r},"167f":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.component,{tag:"component",attrs:{equipment:e.equipment}})},r=[],i=(n("13d5"),n("b64b"),n("d3b7"),n("ade3")),s=n("d09c"),o=window.custom.components,u={components:Object.keys(o).reduce((function(e,t){var a=o[t];return Object.assign(e,Object(i["a"])({},a,(function(){return{component:n("0b92")("./"+a),loading:s["default"],delay:0}})))}),{}),props:{equipment:{type:Object,required:!0},component:{type:String,required:!0}}},c=u,l=n("2877"),m=Object(l["a"])(c,a,r,!1,null,null,null);t["default"]=m.exports},"2fbc":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box is-radiusless has-background-white-bis"},[n("nav",{staticClass:"breadcrumb container is-flex-space-between",attrs:{"aria-label":"breadcrumbs"}},[n("ul",e._l(e.items,(function(t,a){return n("li",{key:t.text,class:{"is-active":t.isActive}},[n("router-link",{attrs:{to:t.link}},[t.icon?n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"fa",class:t.icon,attrs:{"aria-hidden":"true"}})]):e._e(),n("span",{class:{"is-hidden-mobile":a!==e.items.length-1&&t.icon}},[e._v(e._s(t.text))])])],1)})),0),e.summary&&e.summary.keys?n("aside",{staticClass:"has-text-grey has-text-weight-light is-size-7 has-margin-left-7"},e._l(e.summary.keys,(function(t){return n("span",{key:t.key,staticClass:"has-padding-left-8"},[n("i",{staticClass:"fa-fw",class:e.getSummaryIconClass(t.key)}),e._v(e._s(t.value)+e._s(e.getSummaryUnit(t.key)))])})),0):e._e()])])},r=[],i=n("3d8e"),s={mixins:[i["a"]],props:{items:{type:Array,required:!0},summary:{type:Object,required:!1,default:null}}},o=s,u=n("2877"),c=Object(u["a"])(o,a,r,!1,null,null,null);t["a"]=c.exports},"2fc4":function(e,t,n){},"3d8e":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("7db0");var a=n("5530"),r=n("2f62"),i=Object(r["a"])("data"),s=i.mapGetters,o={data:function(){return{summaryKeys:[{key:"TEMPERATURE",label:"Température"},{key:"LIGHT",label:"Lumières"},{key:"HUMIDITY",label:"Humidité"},{key:"POWER",label:"Puissance"},{key:"DOWNLOAD",label:"Download"},{key:"UPLOAD",label:"Upload"}]}},computed:Object(a["a"])({},s(["getRoomSummaryById"])),methods:{getSummaryIconClass:function(e){switch(e){case"humidity":return"fa fa-tint";case"temperature":return"fa fa-thermometer-half";case"light":return"fa fa-lightbulb";case"power":return"fa fa-bolt";case"download":return"fas fa-arrow-down";case"upload":return"fas fa-arrow-up"}return""},getSummaryUnit:function(e){switch(e){case"humidity":return"%";case"temperature":return"°C";case"light":return"";case"power":return" W";case"upload":case"download":return" Ko/s"}return""},getSummaryTypeLabel:function(e){var t=this.summaryKeys.find((function(t){return t.key===e}));return t?t.label:e}}}},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=(n("2ca0"),n("2f62")),i=n("bfa9"),s=(n("4160"),n("b64b"),n("159b"),n("5530")),o=function(){return{login:null,isAuthenticated:!1,roles:[],information:{}}},u=Object(s["a"])({hasNetwork:!1,hasEventsListenerOpen:!1,hasSidebarOpened:!1},o()),c={},l={setUser:function(e,t){e.login=t.login,e.id=t.id,e.isAuthenticated=t.isAuthenticated,e.roles=t.roles},setEventsListenerStatus:function(e,t){e.hasEventsListenerOpen=t},setNetworkStatus:function(e,t){e.hasNetwork=t},setInformation:function(e,t){e.information=t},clear:function(e){var t=o();Object.keys(t).forEach((function(n){e[n]=t[n]}))},setSidebarStatus:function(e,t){e.hasSidebarOpened=t}},m={},d={namespaced:!0,state:u,getters:c,actions:m,mutations:l},p=(n("99af"),n("4de4"),n("c740"),n("caad"),n("c975"),n("d81d"),n("45fc"),n("a434"),n("b0c0"),n("d3b7"),n("07ac"),n("6062"),n("2532"),n("3ca3"),n("ddb0"),n("2909")),f=(n("96cf"),n("1da1")),b=n("5e23"),g=new a["a"],h=new b["b"].Entity("states"),v=new b["b"].Entity("actions"),y=new b["b"].Entity("equipments",{states:[h],actions:[v]}),w=new b["b"].Entity("rooms",{equipments:[y]}),k=new b["b"].Array(w),x=new b["b"].Entity("scenarios"),I=new b["b"].Array(x),R=function(){return{rooms:{},roomsSummary:{},roomsRaw:[],equipments:{},states:{},actions:{},summaryList:[],statesStatistics:{},tagsList:[],scenarios:{},notifications:[]}},O=R(),C={getRoomById:function(e){return function(t){return e.rooms[t]||{name:"",equipments:[]}}},getRoomSummaryById:function(e){return function(t){return e.roomsSummary[t]||{}}},getEquipmentById:function(e){return function(t){return e.equipments[t]||{states:[],actions:[]}}},getEquipmentsIdByTag:function(e){return function(t){return Object.values(e.equipments).filter((function(e){return e.tags.includes(t)})).map((function(e){return e.id}))}},getStatesByEquipmentId:function(e,t){return function(n){var a=[],r=e.equipments[n].states;return r.forEach((function(e){var n=t.getStateById(e);a.push({id:n.id,type:n.type,genericType:n.genericType,isVisible:n.isVisible})})),a}},getActionsByEquipmentId:function(e,t){return function(n){var a=[],r=e.equipments[n].actions;return r.forEach((function(e){var n=t.getActionById(e);a.push({id:n.id,type:n.type,stateFeedbackId:n.stateFeedbackId,isVisible:n.isVisible,options:n.options})})),a}},getStatesByIds:function(e,t){return function(e){var n=[];return e.forEach((function(e){var a=t.getStateById(e);n.push({id:a.id,type:a.type,genericType:a.genericType,isVisible:a.isVisible})})),n}},getActionsByIds:function(e,t){return function(e){var n=[];return e.forEach((function(e){var a=t.getActionById(e);n.push({id:a.id,type:a.type,stateFeedbackId:a.stateFeedbackId,isVisible:a.isVisible})})),n}},getStateById:function(e){return function(t){return e.states[t]||{}}},getActionById:function(e){return function(t){return e.actions[t]||{}}},getStateStatisticsById:function(e){return function(t){return e.statesStatistics[t]||null}},getScenarios:function(e){return function(){return Object.keys(e.scenarios).map((function(t){return e.scenarios[t]}))}},getNotificationsCount:function(e){return function(){return e.notifications.length}},getRoomVisiblesEquipment:function(e){return function(t){return e.rooms[t].equipments.filter((function(t){return e.equipments[t].isVisible}))}}},q={saveRooms:function(e,t){e.roomsRaw=t;var n=Object(b["a"])(t,k);Object.assign(e,n.entities)},updateRooms:function(e,t){var n={};t.forEach((function(t){var a=t.id;if(e.rooms[a])for(var r in n[a]=e.rooms[a],t)n[a][r]=t[r];else n[a]=t})),Object.keys(n).length>0&&(e.rooms=Object.assign({},e.rooms,n));var a=t.map((function(e){return e.id}));for(var r in e.rooms)a.includes(r)||delete e.rooms[r]},saveRoom:function(e,t){var n=Object(b["a"])(t,w);if(Object.prototype.hasOwnProperty.call(e.rooms,t.id))for(var a in n.entities.rooms[t.id])e.rooms[t.id][a]=n.entities.rooms[t.id][a];else e.rooms[t.id]=n.entities.rooms[t.id];Object.assign(e.equipments,n.entities.equipments),Object.assign(e.states,n.entities.states),Object.assign(e.actions,n.entities.actions)},deleteRoom:function(e,t){delete e.rooms[t];var n=e.roomsRaw.findIndex((function(e){return e.id===t}));-1!==n&&e.roomsRaw.splice(n,1)},saveRoomSummary:function(e,t){"global"===t.id&&(t.id=0);var n={key:t.key,value:t.value},a=e.roomsSummary[t.id];if(a){var r=a.keys.findIndex((function(e){return e.key===t.key}));-1!==r?a.keys.splice(r,1,n):a.keys.push(n)}else a={id:t.id,keys:[n]};var i=[];i[t.id]=a,e.roomsSummary=Object.assign({},e.roomsSummary,i)},saveStateStatistics:function(e,t){var n={};n[t.id]=t.statistics,e.statesStatistics=Object.assign({},e.statesStatistics,n)},updateEquipments:function(e,t){var n={};t.forEach((function(t){var a=t.id;if(!e.equipments[a])return n[a]=t,void(Object.prototype.hasOwnProperty.call(t,"tags")&&(e.tagsList=e.tagsList.concat(t.tags.filter((function(t){return!e.tagsList.includes(t)})))));var r=e.equipments[a].roomId;for(var i in n[a]=Object.assign({},e.equipments[a]),t)n[a][i]=t[i];if(r!==t.roomId){if(Object.prototype.hasOwnProperty.call(e.equipments[a],"roomId")&&null!==r){var s=e.rooms[r].equipments.indexOf(t.id);-1!==s&&e.rooms[r].equipments.splice(s,1)}Object.prototype.hasOwnProperty.call(t,"roomId")&&null!==t.roomId&&e.rooms[t.roomId].equipments.push(t.id)}if(Object.prototype.hasOwnProperty.call(t,"tags")&&(e.equipments[a].tags.length!==t.tags.length||e.equipments[a].tags.some((function(e,n){return e!==t.tags[n]})))){var o=t.tags.filter((function(t){return!e.equipments[a].tags.includes(t)})).filter((function(t){return!e.tagsList.includes(t)}));e.equipments[a].tags.filter((function(e){return!t.tags.includes(e)})).filter((function(t){return!Object.values(e.equipments).some((function(e){return e.id!==a&&e.tags.includes(t)}))})).forEach((function(t){var n=e.tagsList.indexOf(t);e.tagsList.splice(n,1)})),e.tagsList=e.tagsList.concat(o)}})),Object.keys(n).length>0&&(e.equipments=Object.assign({},e.equipments,n))},deleteEquipment:function(e,t){Object.prototype.hasOwnProperty.call(e.equipments,t)&&(e.equipments[t].tags.filter((function(n){return!Object.values(e.equipments).some((function(e){return e.id!==t&&e.tags.includes(n)}))})).forEach((function(t){var n=e.tagsList.indexOf(t);e.tagsList.splice(n,1)})),delete e.equipments[t])},updateStates:function(e,t){var n={};t.forEach((function(t){var a=t.id;if(e.states[a])for(var r in n[a]=e.states[a],t)n[a][r]=t[r];else n[a]=t})),Object.keys(n).length>0&&(e.states=Object.assign({},e.states,n))},updateActions:function(e,t){var n={};t.forEach((function(t){var a=t.id;if(e.actions[a])for(var r in n[a]=e.actions[a],t)n[a][r]=t[r];else n[a]=t})),Object.keys(n).length>0&&(e.actions=Object.assign({},e.actions,n))},updateStatesActions:function(e,t){var n={},r={},i={};t.forEach((function(t){var s=t.id;if(e.states[s]||e.actions[s]){if(e.states[s]){n[s]=e.states[s],n[s].currentValue=t.currentValue;var o=e.states[s].eqId;a["a"].moment(t.collectDate).isAfter(e.equipments[o].lastCommunication)&&(i[o]=e.equipments[o],i[o].lastCommunication=a["a"].moment(t.collectDate).format())}e.actions[s]&&(r[s]=e.actions[s],r[s].currentValue=t.currentValue)}})),Object.keys(n).length>0&&(e.states=Object.assign({},e.states,n)),Object.keys(r).length>0&&(e.actions=Object.assign({},e.actions,r)),Object.keys(i).length>0&&(e.equipments=Object.assign({},e.equipments,i))},deleteState:function(e,t){delete e.states[t]},deleteAction:function(e,t){delete e.actions[t]},saveTags:function(e,t){e.tagsList=t},saveScenarios:function(e,t){var n=Object(b["a"])(t,I);Object.assign(e,n.entities)},updateScenario:function(e,t){if(e.scenarios[t.id]){var n={};n[t.id]=e.scenarios[t.id],n[t.id].state=t.state,e.scenarios=Object.assign({},e.scenarios,n)}},saveNotifications:function(e,t){e.notifications=t},addNotification:function(e,t){e.notifications.push(t),e.notifications.sort((function(e,t){return a["a"].moment(t.date)-a["a"].moment(e.date)}))},clear:function(e){Object.assign(e,R())}},E={loadRooms:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,g.$Provider.getSummary().then((function(e){for(var t in e)null!==e[t]&&n("saveRoomSummary",{id:"global",key:t,value:e[t]})}),(function(e){n("app/setInformation",{type:"is-danger",message:"Erreur lors de la récupération du résumé global<br>".concat(e.message)},{root:!0})})),t.next=5,g.$Provider.getRooms(!0,!0);case 5:if(a=t.sent,void 0!==a){t.next=8;break}return t.abrupt("return");case 8:n("saveRooms",a),r=[],a.forEach((function(e){e.equipments.forEach((function(e){r=r.concat(e.tags)}))})),n("saveTags",Object(p["a"])(new Set(r))),i=!1,a.forEach((function(e){e.summary&&Array.isArray(e.summary)&&(i=!0,e.summary.forEach((function(t){n("saveRoomSummary",{id:e.id,key:t.key,value:t.value})})))})),i||a.forEach(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(t.summary);case 1:if((e.t1=e.t0()).done){e.next=9;break}return a=e.t1.value,e.next=5,g.$Provider.getRoomSummary(t.id,a);case 5:r=e.sent,n("saveRoomSummary",{id:t.id,key:a,value:r}),e.next=1;break;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](1),n("app/setInformation",{type:"is-danger",message:"Erreur lors de la récupération des pièces<br>".concat(t.t0.message)},{root:!0});case 20:case"end":return t.stop()}}),t,null,[[1,17]])})))()},vxRefreshRooms:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,t.next=4,g.$Provider.getRooms(!1,!1);case 4:if(a=t.sent,void 0!==a){t.next=7;break}return t.abrupt("return");case 7:n("updateRooms",a),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),n("app/setInformation",{type:"is-danger",message:"Erreur lors du rafrichissement des pièces<br>".concat(t.t0.message)},{root:!0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},vxSaveRoom:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var a,r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.commit,r=t.room,i=t.isNew,n.prev=2,!i){n.next=9;break}return n.next=6,g.$Provider.createRoom(r);case 6:r=n.sent,n.next=12;break;case 9:return n.next=11,g.$Provider.updateRoom(r);case 11:r=n.sent;case 12:return s={id:r.id,isVisible:r.isVisible,name:r.name,parentId:r.parentId},r.equipments&&(s.equipments=r.equipments),r.summary&&(s.summary=r.summary),a("saveRoom",s),n.abrupt("return",r);case 19:return n.prev=19,n.t0=n["catch"](2),a("app/setInformation",{type:"is-danger",message:n.t0.message},{root:!0}),n.abrupt("return",!1);case 23:case"end":return n.stop()}}),n,null,[[2,19]])})))()},vxDeleteRoom:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,n.prev=1,n.next=4,g.$Provider.deleteRoom(t);case 4:return a("deleteRoom",t),n.abrupt("return",!0);case 8:return n.prev=8,n.t0=n["catch"](1),a("app/setInformation",{type:"is-danger",message:n.t0.message},{root:!0}),n.abrupt("return",!1);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},vxRefreshEquipments:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,t.next=4,g.$Provider.getEquipments(!1,!1);case 4:if(a=t.sent,void 0!==a){t.next=7;break}return t.abrupt("return");case 7:n("updateEquipments",a),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),n("app/setInformation",{type:"is-danger",message:"Erreur lors du rafrichissement des équipements<br>".concat(t.t0.message)},{root:!0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},vxSaveEquipment:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.commit,r=t.equipment,i=t.isNew,n.prev=2,!i){n.next=9;break}return n.next=6,g.$Provider.createEquipment(r);case 6:r=n.sent,n.next=12;break;case 9:return n.next=11,g.$Provider.updateEquipment(r);case 11:r=n.sent;case 12:return a("updateEquipments",[r]),n.abrupt("return",r);case 16:return n.prev=16,n.t0=n["catch"](2),a("app/setInformation",{type:"is-danger",message:n.t0.message},{root:!0}),n.abrupt("return",!1);case 20:case"end":return n.stop()}}),n,null,[[2,16]])})))()},vxDeleteEquipment:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,n.prev=1,n.next=4,g.$Provider.deleteEquipment(t);case 4:return a("deleteEquipment",t),n.abrupt("return",!0);case 8:return n.prev=8,n.t0=n["catch"](1),a("app/setInformation",{type:"is-danger",message:n.t0.message},{root:!0}),n.abrupt("return",!1);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},vxRefreshStates:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,t.next=4,g.$Provider.getStates();case 4:if(a=t.sent,void 0!==a){t.next=7;break}return t.abrupt("return");case 7:n("updateStates",a),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),n("app/setInformation",{type:"is-danger",message:"Erreur lors du rafrichissement des états<br>".concat(t.t0.message)},{root:!0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},vxSaveState:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.commit,r=t.state,i=t.isNew,n.prev=2,!i){n.next=9;break}return n.next=6,g.$Provider.createState(r);case 6:r=n.sent,n.next=12;break;case 9:return n.next=11,g.$Provider.updateState(r);case 11:r=n.sent;case 12:return a("updateStates",[r]),n.abrupt("return",r);case 16:return n.prev=16,n.t0=n["catch"](2),a("app/setInformation",{type:"is-danger",message:"Erreur lors de la sauvegarde de l'état<br>".concat(n.t0.message)},{root:!0}),n.abrupt("return",!1);case 20:case"end":return n.stop()}}),n,null,[[2,16]])})))()},vxDeleteState:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,n.prev=1,n.next=4,g.$Provider.deleteState(t);case 4:return a("deleteState",t),n.abrupt("return",!0);case 8:return n.prev=8,n.t0=n["catch"](1),a("app/setInformation",{type:"is-danger",message:"Erreur lors de la suppression de l'état<br>".concat(n.t0.message)},{root:!0}),n.abrupt("return",!1);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},vxRefreshActions:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,t.next=4,g.$Provider.getActions();case 4:if(a=t.sent,void 0!==a){t.next=7;break}return t.abrupt("return");case 7:n("updateActions",a),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),n("app/setInformation",{type:"is-danger",message:"Erreur lors du rafrichissement des actions<br>".concat(t.t0.message)},{root:!0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},vxSaveAction:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=e.commit,r=t.action,i=t.isNew,n.prev=2,!i){n.next=9;break}return n.next=6,g.$Provider.createAction(r);case 6:r=n.sent,n.next=12;break;case 9:return n.next=11,g.$Provider.updateAction(r);case 11:r=n.sent;case 12:return a("updateActions",[r]),n.abrupt("return",r);case 16:return n.prev=16,n.t0=n["catch"](2),a("app/setInformation",{type:"is-danger",message:"Erreur lors de la sauvegarde de l'action<br>".concat(n.t0.message)},{root:!0}),n.abrupt("return",!1);case 20:case"end":return n.stop()}}),n,null,[[2,16]])})))()},vxDeleteAction:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,n.prev=1,n.next=4,g.$Provider.deleteAction(t);case 4:return a("deleteAction",t),n.abrupt("return",!0);case 8:return n.prev=8,n.t0=n["catch"](1),a("app/setInformation",{type:"is-danger",message:"Erreur lors de la suppression de l'action<br>".concat(n.t0.message)},{root:!0}),n.abrupt("return",!1);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},loadStateStatistics:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,e.state,n.prev=1,n.next=4,g.$Provider.getStatistics(t);case 4:if(r=n.sent,void 0!==r){n.next=7;break}return n.abrupt("return");case 7:a("saveStateStatistics",{id:t,statistics:r}),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](1),a("app/setInformation",{type:"is-danger",message:"Erreur lors de la récupération des statistiques<br>".concat(n.t0.message)},{root:!0});case 13:case"end":return n.stop()}}),n,null,[[1,10]])})))()},executeAction:function(e,t){return Object(f["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.commit,n.prev=1,n.next=4,g.$Provider.executeAction(t.id,t.options);case 4:n.next=10;break;case 6:n.prev=6,n.t0=n["catch"](1),console.error(n.t0),a("app/setInformation",{type:"is-danger",message:"Erreur lors de la requête d'exécution de la commande<br>".concat(n.t0.message)},{root:!0});case 10:case"end":return n.stop()}}),n,null,[[1,6]])})))()},loadScenarios:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,t.next=4,g.$Provider.getScenarios();case 4:if(a=t.sent,void 0!==a){t.next=7;break}return t.abrupt("return");case 7:n("saveScenarios",a),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),n("app/setInformation",{type:"is-danger",message:"Erreur lors de la récupération des scénarios<br>".concat(t.t0.message)},{root:!0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},loadNotifications:function(e){return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,t.next=4,g.$Provider.getNotifications();case 4:if(r=t.sent,void 0!==r){t.next=7;break}return t.abrupt("return");case 7:r.sort((function(e,t){return a["a"].moment(t.date)-a["a"].moment(e.date)})),n("saveNotifications",r),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),n("app/setInformation",{type:"is-danger",message:"Erreur lors de la récupération des notifications<br>".concat(t.t0.message)},{root:!0});case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))()}},j={namespaced:!0,state:O,getters:C,actions:E,mutations:q},S=new i["a"]({storage:window.localStorage,modules:["data"],filter:function(e){return e.type.startsWith("data/")&&"data/clear"!==e.type}});a["a"].use(r["b"]);var _=new r["b"].Store({actions:{clear:function(e){var t=e.commit;t("app/clear"),t("data/clear")}},modules:{app:d,data:j},plugins:[S.plugin],strict:!1}),A=window.custom.provider,V={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{store:null};if(void 0===A||!("system"in A))throw new Error("No system provider set, check your local.js");switch(A.system){case"jeedom":e.prototype.$Provider=n("caa4").JeedomApi(e,A.jsonRpcApiUrl,A.websocketUrl,t.store,A.statisticsPeriod);break;case"demo":e.prototype.$Provider=n("a464").DemoApi(e,t.store,A.statisticsPeriod);break;default:throw e.prototype.$Provider={},new Error('System provider "'.concat(A.system,'" is not handled'))}}},T=(n("ac1f"),n("5319"),n("841c"),n("8c4f")),N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"hero is-fullheight"},[n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container has-text-centered"},[n("div",{staticClass:"column is-4 is-offset-4"},[n("div",{staticClass:"box has-background-white-bis"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[n("h3",{staticClass:"title has-text-grey"},[e._v(e._s(e.title))]),n("p",{staticClass:"subtitle has-text-grey"},[e._v("Login")]),n("div",{staticClass:"field"},[n("div",{staticClass:"control has-icons-left"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.credentials.login,expression:"credentials.login"}],staticClass:"input is-medium",attrs:{type:"text",name:"login",placeholder:"Username"},domProps:{value:e.credentials.login},on:{input:function(t){t.target.composing||e.$set(e.credentials,"login",t.target.value)}}}),e._m(0)])]),n("div",{staticClass:"field"},[n("div",{staticClass:"control has-icons-left"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.credentials.password,expression:"credentials.password"}],staticClass:"input is-medium",attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:e.credentials.password},on:{input:function(t){t.target.composing||e.$set(e.credentials,"password",t.target.value)}}}),e._m(1)])]),n("div",{staticClass:"field has-text-left has-padding-left-7"},[n("b-checkbox",{class:{"has-text-grey-light":!e.credentials.remember},model:{value:e.credentials.remember,callback:function(t){e.$set(e.credentials,"remember",t)},expression:"credentials.remember"}},[e._v(" "+e._s(e.rememberLabel)+" ")])],1),n("div",{staticClass:"field"},[n("button",{staticClass:"button is-block is-primary is-medium is-fullwidth",class:{"is-loading":e.isLoading},attrs:{type:"submit",disabled:e.isDisabled}},[n("span",{staticClass:"fa fa-sign-in-alt fa-fw has-margin-right-7",attrs:{"aria-hidden":"true"}}),e._v("Login")])]),e.error?n("div",{staticClass:"message is-danger"},[n("div",{staticClass:"message-body has-text-danger"},[e._v(e._s(e.error))])]):e._e()])])])])])])},L=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small is-left"},[n("i",{staticClass:"fa fa-user"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small is-left"},[n("i",{staticClass:"fa fa-key"})])}];function P(e,t){var n=new a["a"],r=n.$Provider.getRoles(t),i=n.$Provider.getUserId(t);n.$Provider.setAuthentication(t),_.commit("app/setUser",{isAuthenticated:!0,login:e,roles:r,id:i})}var D={login:function(e,t,n){return Object(f["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e&&t){r.next=2;break}return r.abrupt("return",!1);case 2:return r.next=4,(new a["a"]).$Provider.authenticate(e,t);case 4:if(i=r.sent,i){r.next=7;break}return r.abrupt("return",!1);case 7:return P(e,i),n&&localStorage.setItem("user",JSON.stringify({login:e,authentication:i})),r.abrupt("return",!0);case 10:case"end":return r.stop()}}),r)})))()},logout:function(){_.dispatch("clear"),localStorage.clear(),sessionStorage.clear()},restoreUser:function(){try{var e=JSON.parse(localStorage.getItem("user"));e&&P(e.login,e.authentication)}catch(t){console.error("Error during restore user",t)}}},$=Object(r["a"])("app"),M=$.mapState,H=window.custom,U={data:function(){return{title:H.title,credentials:{login:"",password:"",remember:!1},isLoading:!1,error:""}},computed:Object(s["a"])({isDisabled:function(){return this.isLoading||!this.credentials.login||!this.credentials.password||!this.hasNetwork},rememberLabel:function(){return this.credentials.remember?"Rester connecté":"Ne pas stocker mes informations de connexion"}},M(["hasNetwork"])),mounted:function(){document.body.classList.remove("has-navbar-fixed-top")},methods:{login:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.credentials.login&&""!==e.credentials.password){t.next=2;break}return t.abrupt("return");case 2:return e.isLoading=!0,t.prev=3,t.next=6,D.login(e.credentials.login,e.credentials.password,e.credentials.remember);case 6:if(void 0===e.$route.query.redirect){t.next=9;break}return e.$router.replace(e.$route.query.redirect),t.abrupt("return");case 9:e.$router.replace({name:"home"}),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](3),e.$buefy.toast.open({message:t.t0.message,type:"is-danger",position:"is-bottom"});case 15:e.isLoading=!1;case 16:case"end":return t.stop()}}),t,null,[[3,12]])})))()}}},F=U,B=n("2877"),z=Object(B["a"])(F,N,L,!1,null,null,null),G=z.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"hero"},[n("div",{staticClass:"hero-head"},[n("breadcrumb",{attrs:{items:[{link:{name:"rooms"},icon:"fa-home",text:"Pièces",isActive:!0}],summary:e.summary}})],1),n("div",{staticClass:"hero-body has-padding-horizontal-7"},[n("div",{staticClass:"container"},[n("div",{staticClass:"field"},[n("p",{staticClass:"control has-icons-left"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"input",attrs:{type:"text",placeholder:"Rechercher une pièce"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._m(0)])]),n("div",{staticClass:"columns is-multiline"},e._l(e.ordered,(function(e){return n("room-tile",{key:e.id,attrs:{id:e.id}})})),1)])])])},W=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small is-left"},[n("i",{staticClass:"fas fa-search"})])}],J=Object(r["a"])("data"),Q=J.mapState,K=J.mapGetters,X=J.mapActions;function Z(e,t,n){null!==n.id&&t.push(n);var a=[];return e.forEach((function(e){e.parentId===n.id&&a.push(e)})),a.sort((function(e,t){return e.order-t.order})),a.forEach((function(n){t=Z(e,t,n)})),t}var ee={computed:Object(s["a"])(Object(s["a"])({roomsOrdered:function(){return Z(this.roomsRaw.filter((function(e){return e.isVisible})),[],{id:null})}},Q(["rooms","roomsRaw","tagsList"])),K(["getRoomVisiblesEquipment"])),methods:Object(s["a"])({},X(["loadRooms"]))},te=n("3d8e"),ne=n("2fbc"),ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-link",{staticClass:"column",staticStyle:{"min-width":"max-content"},attrs:{to:{name:"room",params:{id:e.room.id}}}},[n("div",{staticClass:"notification  has-padding-3 is-primary has-text-centered"},[n("span",{staticClass:"subtitle"},[e._v(e._s(e.room.name))]),n("span",{staticClass:"is-size-7"},e._l(e.summary.keys,(function(t){return n("span",{key:t.key,staticClass:"has-padding-left-8"},[n("i",{staticClass:"fa fa-fw",class:e.getSummaryIconClass(t.key)}),e._v(e._s(t.value)+e._s(e.getSummaryUnit(t.key)))])})),0)])])},re=[],ie=Object(r["a"])("data"),se=ie.mapGetters,oe={computed:Object(s["a"])({},se(["getRoomById","getRoomVisiblesEquipment"]))},ue={name:"Room",mixins:[te["a"],oe],props:{id:{type:String,required:!0}},computed:{room:function(){return this.getRoomById(this.id)},summary:function(){return this.getRoomSummaryById(this.id)}}},ce=ue,le=Object(B["a"])(ce,ae,re,!1,null,null,null),me=le.exports,de={name:"Rooms",components:{Breadcrumb:ne["a"],RoomTile:me},mixins:[ee,te["a"]],data:function(){return{search:""}},computed:{ordered:function(){var e=this;return this.roomsOrdered.filter((function(t){return e.getRoomVisiblesEquipment(t.id).length>0&&t.name.toLowerCase().indexOf(e.search.toLowerCase())>-1}))},summary:function(){return this.getRoomSummaryById(0)}}},pe=de,fe=Object(B["a"])(pe,Y,W,!1,null,null,null),be=fe.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"hero"},[n("div",{staticClass:"hero-head"},[n("breadcrumb",{attrs:{items:e.breadcrumbItems,summary:e.summary},on:{"update:items":function(t){e.breadcrumbItems=t}}})],1),n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container"},[n("ul",e._l(e.equipments,(function(e){return n("li",{key:e},[n("equipment",{attrs:{id:e}})],1)})),0)])])])},he=[],ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"card has-margin-bottom-6"},[n("header",{staticClass:"card-header"},[n("p",{staticClass:"card-header-title"},[e._v(e._s(e.equipment.name))]),n("aside",{staticClass:"card-header-icon is-size-7-mobile"},[e.equipment.battery?n("span",{class:[e.equipment.hasLowBattery?"has-text-danger":"has-text-grey"]},[n("i",{staticClass:"fa-mr",class:e.getBatteryLevelIconClass(e.equipment.battery)}),e._v(e._s(e.equipment.battery)+"%")]):e._e(),e.equipment.lastCommunication?n("span",{staticClass:"has-margin-left-8",class:[e.equipment.hasNoCommunication?"has-text-danger":"has-text-grey"],attrs:{title:e._f("moment")(e.equipment.lastCommunication,"LLLL")}},[n("i",{staticClass:"fa-mr far fa-clock"}),n("time-ago",{attrs:{date:e.equipment.lastCommunication,"drop-fixes":!0}})],1):e._e()])]),e.isEquipmentHandled(e.equipment.module)?n("custom-component",{staticClass:"card-content",attrs:{component:e.getEquipmentComponent(e.equipment.module),equipment:e.equipment}}):n("generic-component",{staticClass:"card-content",attrs:{equipment:e.equipment}})],1)},ye=[],we=n("7b8a"),ke=n("167f"),xe=n("cd32"),Ie=n("647b"),Re=window.custom,Oe=Object(r["a"])("data"),Ce=Oe.mapGetters,qe={components:{TimeAgo:we["a"],CustomComponent:ke["default"],GenericComponent:xe["default"]},mixins:[Ie["a"]],props:{id:{type:String,required:!0}},computed:Object(s["a"])({equipment:function(){return this.getEquipmentById(this.id)}},Ce(["getEquipmentById"])),methods:{getEquipmentComponent:function(e){return Re.components[e]},isEquipmentHandled:function(e){return void 0!==Re.components[e]}}},Ee=qe,je=Object(B["a"])(Ee,ve,ye,!1,null,null,null),Se=je.exports,_e={name:"RoomDetail",components:{Breadcrumb:ne["a"],Equipment:Se},mixins:[te["a"],oe],props:{id:{type:String,required:!0}},data:function(){return{breadcrumbItems:[]}},computed:{room:function(){return this.getRoomById(this.id)},title:function(){return this.room.name},summary:function(){return this.getRoomSummaryById(this.id)},equipments:function(){return this.getRoomVisiblesEquipment(this.id)}},watch:{title:{handler:function(e){document.title=document.title.replace("Pièce |",e+" |"),this.breadcrumbItems[1].text=e},deep:!0}},created:function(){this.breadcrumbItems=[{link:{name:"rooms"},icon:"fa-home",text:"Pièces"},{link:{name:"rooms",params:{id:this.room.id}},icon:"fa-cube",text:this.room.name,isActive:!0}]}},Ae=_e,Ve=Object(B["a"])(Ae,ge,he,!1,null,null,null),Te=Ve.exports,Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"hero"},[n("div",{staticClass:"hero-head"},[n("breadcrumb",{attrs:{items:e.breadcrumbItems},on:{"update:items":function(t){e.breadcrumbItems=t}}})],1),n("div",{staticClass:"hero-body"},[n("div",{staticClass:"container"},[n("ul",e._l(e.equipments,(function(e){return n("li",{key:e},[n("equipment",{attrs:{id:e}})],1)})),0)])])])},Le=[],Pe=Object(r["a"])("data"),De=Pe.mapGetters,$e={name:"Tag",components:{Breadcrumb:ne["a"],Equipment:Se},props:{tag:{type:String,required:!0}},data:function(){return{breadcrumbItems:[]}},computed:Object(s["a"])(Object(s["a"])({},De(["getEquipmentsIdByTag"])),{},{equipments:function(){return this.getEquipmentsIdByTag(this.tag)}}),created:function(){document.title=document.title.replace("Tag |",this.tag+" |"),this.breadcrumbItems=[{link:{name:"tag",params:{tag:this.tag}},icon:"fa-tag",text:this.tag,isActive:!0}]}},Me=$e,He=Object(B["a"])(Me,Ne,Le,!1,null,null,null),Ue=He.exports;a["a"].use(T["a"]);var Fe=window.custom,Be=[{path:"/",name:"home",component:be,meta:{title:"Home"}},{path:"/rooms",name:"rooms",component:be,meta:{title:"Pièces"}},{path:"/rooms/:id",name:"room",component:Te,props:!0,meta:{title:"Pièce"}},{path:"/tags",name:"tags",component:Ue,props:!0,meta:{title:"Tag"}},{path:"/tags/:tag",name:"tag",component:Ue,props:!0,meta:{title:"Tag"}},{path:"/scenarios",name:"scenarios",component:function(){return n.e("Scenarios").then(n.bind(null,"a092"))},meta:{title:"Scénarios"}},{path:"/login",name:"login",component:G,meta:{title:"Login"}},{path:"/about",name:"about",component:function(){return n.e("About").then(n.bind(null,"84ba"))},meta:{title:"A propos"}},{path:"/profile",name:"profile",component:function(){return n.e("Profile").then(n.bind(null,"66aa"))},meta:{title:"Profil"}},{path:"/notifications",name:"notifications",component:function(){return n.e("Notifications").then(n.bind(null,"e985"))},meta:{title:"Notifications"}},{path:"/admin",name:"admin",component:function(){return n.e("Admin").then(n.bind(null,"d824"))},meta:{title:"Admin"}},{path:"/admin/users",name:"admin-users",component:function(){return n.e("Admin").then(n.bind(null,"76bf"))},meta:{title:"Admin utilisateurs"}},{path:"/admin/users/:id",name:"admin-user",props:!0,component:function(){return n.e("Admin").then(n.bind(null,"a2ae"))},meta:{title:"Admin utilisateur"}},{path:"/admin/rooms",name:"admin-rooms",component:function(){return n.e("Admin").then(n.bind(null,"37f4"))},meta:{title:"Admin pièces"}},{path:"/admin/rooms/:id",name:"admin-room",props:!0,component:function(){return n.e("Admin").then(n.bind(null,"8bdc"))},meta:{title:"Admin pièce"}},{path:"/admin/equipments",name:"admin-equipments",component:function(){return n.e("Admin").then(n.bind(null,"a53a"))},props:function(e){return{search:e.query.search}},meta:{title:"Admin équipements"}},{path:"/admin/equipments/:id",name:"admin-equipment",props:!0,component:function(){return n.e("Admin").then(n.bind(null,"2cca"))},meta:{title:"Admin équipement"}},{path:"/admin/states",name:"admin-states",component:function(){return n.e("Admin").then(n.bind(null,"4428"))},meta:{title:"Admin états"}},{path:"/admin/states/:id",name:"admin-state",props:!0,component:function(){return n.e("Admin").then(n.bind(null,"8526"))},meta:{title:"Admin état"}},{path:"/admin/actions",name:"admin-actions",component:function(){return n.e("Admin").then(n.bind(null,"b448"))},meta:{title:"Admin actions"}},{path:"/admin/actions/:id",name:"admin-action",props:!0,component:function(){return n.e("Admin").then(n.bind(null,"3eb3"))},meta:{title:"Admin action"}},{path:"/admin/system",name:"admin-system",component:function(){return n.e("Admin").then(n.bind(null,"91ff"))},meta:{title:"Admin système"}},{path:"/admin/scenarios",name:"admin-scenarios",props:!0,component:function(){return n.e("Admin").then(n.bind(null,"d2f7"))},meta:{title:"Admin scénarios"}},{path:"/admin/scenarios/:id",name:"admin-scenario",props:!0,component:function(){return n.e("Admin").then(n.bind(null,"5d0d"))},meta:{title:"Admin scénario"}}],ze=new T["a"]({routes:Be});ze.beforeEach((function(e,t,n){if(_.state.app.isAuthenticated||"login"===e.name)if(_.state.app.isAuthenticated&&"login"===e.name)n({name:"home",replace:!0});else{if(e.meta.title){var a=e.meta.title,r=e.params;for(var i in r)a=a.replace(":"+i,r[i]);document.title=a+" | "+Fe.title}_.state.app.hasSidebarOpened&&_.commit("app/setSidebarStatus",!1),n()}else n({name:"login",query:{redirect:e.fullPath},replace:!0})}));var Ge=ze,Ye=(n("fb6a"),n("c1df")),We=n.n(Ye),Je=n("c2ad"),Qe=n("d0e1"),Ke=n("9521"),Xe=n("a8eb"),Ze=n("2cdf"),et=n("d132"),tt=n("89fe"),nt=n("4291"),at=n("c2cd"),rt=n("ba82"),it=n("5f08"),st=n("eb83"),ot=n("3db3"),ut=n("73e9"),ct=n("e662"),lt={install:function(e){Object(Je["c"])(e),Je["b"].defaultIconPack="fas",Je["b"].defaultDayNames=We.a.weekdaysMin(),Je["b"].defaultMonthNames=We.a.months().map((function(e){return e[0].toUpperCase()+e.slice(1)})),Je["b"].defaultFirstDayOfWeek=1,e.use(Qe["a"]),e.use(Ke["a"]),e.use(Xe["a"]),e.use(Ze["a"]),e.use(et["a"]),e.use(tt["a"]),e.use(nt["a"]),e.use(at["a"]),e.use(rt["a"]),e.use(it["a"]),e.use(st["a"]),e.use(ot["a"]),e.use(ut["a"]),e.use(ct["a"])}},mt=lt,dt=n("2ead"),pt=n.n(dt),ft=(n("9f26"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isAuthenticated?n("navbar"):e._e(),e.isAuthenticated?n("sidebar"):e._e(),e.isReady?n("router-view",{key:e.$route.fullPath}):e._e()],1)}),bt=[],gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar is-dark is-fixed-top"},[a("div",{staticClass:"navbar-brand"},[a("a",{staticClass:"navbar-item",attrs:{href:"#"},on:{click:e.openSidebar}},[a("img",{staticClass:"fa-mr",attrs:{src:n("fbf5")}}),a("span",{staticClass:"is-hidden-mobile"},[e._v(e._s(e.title))])]),a("div",{staticClass:"navbar-item is-hidden-desktop sync-mobile"},[a("sync")],1)]),a("div",{staticClass:"navbar-menu",attrs:{id:"navbar-menu"}},[a("div",{staticClass:"navbar-start"},[a("router-link",{staticClass:"navbar-item",attrs:{to:{name:"rooms"},title:"Pièces"}},[a("i",{staticClass:"fa fa-home fa-fw fa-mr"}),a("span",{staticClass:"is-navbar-label"},[e._v("Pièces")])]),a("router-link",{staticClass:"navbar-item",attrs:{to:{name:"scenarios"},title:"Scénarios"}},[a("i",{staticClass:"fa fa-book fa-fw fa-mr"}),a("span",{staticClass:"is-navbar-label"},[e._v("Scénarios")])]),e.tagsList.length?a("div",{staticClass:"navbar-item has-dropdown",class:{"is-active":e.hasDropdownTagsDisplayed},on:{click:function(t){e.hasDropdownTagsDisplayed=!e.hasDropdownTagsDisplayed}}},[a("router-link",{staticClass:"navbar-link is-arrowless",attrs:{to:{name:"tags"},event:""}},[a("i",{staticClass:"fa fa-tags fa-fw fa-mr"}),a("span",{staticClass:"is-navbar-label"},[e._v("Catégories")])]),a("div",{staticClass:"navbar-dropdown"},e._l(e.tagsList,(function(t){return a("router-link",{key:t,staticClass:"navbar-item",attrs:{to:{name:"tag",params:{tag:t}}}},[e._v(e._s(t))])})),1)],1):e._e(),e.hasRole("admin")?a("router-link",{staticClass:"navbar-item",attrs:{to:{name:"admin"},title:"Admin"}},[a("i",{staticClass:"fa fa-tools fa-fw fa-mr"}),a("span",{staticClass:"is-navbar-label"},[e._v("Admin")])]):e._e()],1),a("div",{staticClass:"navbar-end is-flex-center"},[a("notifications-counter",{attrs:{"class-name":"navbar-item","is-link":!0}}),a("query"),a("div",{staticClass:"navbar-item sync-tablet"},[a("sync")],1)],1)])])},ht=[],vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.hasNetwork?e.hasEventsListenerOpen?n("a",{staticClass:"fa-stack",attrs:{title:"Connecté, cliquer pour déconnecter",href:"#"},on:{click:e.closeEventsListener}},[n("i",{staticClass:"fa fa-exchange-alt fa-stack-1x has-text-primary"})]):n("a",{staticClass:"fa-stack",attrs:{title:"Déconnecté, cliquer pour reconnecter",href:"#"},on:{click:e.openEventsListener}},[n("i",{staticClass:"fa fa-exchange-alt fa-stack-1x has-text-primary"}),n("i",{staticClass:"fa fa-ban fa-stack-2x has-text-danger"})]):n("span",{staticClass:"fa-stack",attrs:{title:"Hors connexion (réseau)"}},[n("i",{staticClass:"fa fa-wifi fa-stack-1x has-text-primary"}),n("i",{staticClass:"fa fa-ban fa-stack-2x has-text-danger"})])},yt=[],wt=Object(r["a"])("app"),kt=wt.mapState,xt={name:"Sync",computed:Object(s["a"])({},kt(["hasEventsListenerOpen","hasNetwork"])),methods:{openEventsListener:function(e){e.preventDefault(),this.$Provider.openEventsListener(!0,!0)},closeEventsListener:function(e){e.preventDefault(),this.$Provider.closeEventsListener()}}},It=xt,Rt=Object(B["a"])(It,vt,yt,!1,null,null,null),Ot=Rt.exports,Ct=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"is-auto-expand",class:{"is-expanded":e.isExpanded}},[n("b-autocomplete",{attrs:{id:"question",data:e.filteredSentences,placeholder:"Quelle est la température ?",icon:"comments",title:"Poser une question"},on:{focus:function(t){e.isExpanded=!0},select:function(t){return e.ask(t)}},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.ask()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.clear()}]},model:{value:e.question,callback:function(t){e.question=t},expression:"question"}},[n("template",{slot:"empty"},[e._v("Aucune correspondance")])],2),e.isExpanded?n("button",{staticClass:"delete is-medium",attrs:{title:"Fermer"},on:{click:function(t){return e.clear()}}}):e._e()],1)},qt=[],Et={name:"Query",data:function(){return{question:"",sentences:[],isExpanded:!1}},computed:{filteredSentences:function(){var e=this;return this.sentences.filter((function(t){return t.indexOf(e.question.toLowerCase())>-1}))}},mounted:function(){this.getSentences()},methods:{clear:function(e){document.getElementById("question").blur(),this.question="",this.isExpanded=!1},ask:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e&&(t.question=e),""!==t.question){n.next=4;break}return t.clear(),n.abrupt("return");case 4:return n.prev=4,n.next=7,t.$Provider.askQuestion(t.question);case 7:a=n.sent,t.clear(),t.$store.commit("app/setInformation",{type:"is-dark",message:a,position:"is-bottom",duration:5e3}),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](4),t.$store.commit("app/setInformation",{type:"is-danger",message:n.t0.message});case 15:case"end":return n.stop()}}),n,null,[[4,12]])})))()},getSentences:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$Provider.getSentences();case 3:e.sentences=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$store.commit("app/setInformation",{type:"is-danger",message:t.t0.message});case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()}}},jt=Et,St=Object(B["a"])(jt,Ct,qt,!1,null,null,null),_t=St.exports,At=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.count>0?n("div",{class:e.className},[e.isLink?n("router-link",{staticClass:"tag is-danger is-normal is-rounded notification-counter",attrs:{to:{name:"notifications"},title:"Voir les notifications"}},[e._v(e._s(e.count))]):n("span",{staticClass:"tag is-danger is-normal is-rounded notification-counter"},[e._v(e._s(e.count))])],1):e._e()},Vt=[],Tt=Object(r["a"])("data"),Nt=Tt.mapGetters,Lt={name:"NotificationsCounter",props:{className:{type:String,default:""},isLink:{type:Boolean,default:!1}},computed:Object(s["a"])(Object(s["a"])({},Nt(["getNotificationsCount"])),{},{count:function(){return this.getNotificationsCount()}})},Pt=Lt,Dt=Object(B["a"])(Pt,At,Vt,!1,null,null,null),$t=Dt.exports,Mt=Object(r["a"])("app"),Ht=Mt.mapState,Ut=Mt.mapMutations,Ft=window.custom,Bt={name:"Navbar",components:{Sync:Ot,Query:_t,NotificationsCounter:$t},mixins:[ee],data:function(){return{title:Ft.title,hasDropdownTagsDisplayed:!1}},computed:Object(s["a"])({},Ht(["roles"])),mounted:function(){document.body.classList.add("has-navbar-fixed-top")},methods:Object(s["a"])({openSidebar:function(e){e.preventDefault(),this.setSidebarStatus(!0)},hasRole:function(e){return this.roles.includes(e)}},Ut(["setSidebarStatus"]))},zt=Bt,Gt=Object(B["a"])(zt,gt,ht,!1,null,null,null),Yt=Gt.exports,Wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-sidebar",{attrs:{type:"is-light",fullheight:!0,overlay:!0},model:{value:e.open,callback:function(t){e.open=t},expression:"open"}},[a("aside",{staticClass:"has-padding-6"},[a("div",{staticClass:"has-margin-bottom-5 is-flex-center"},[a("img",{attrs:{src:n("fbf5")}}),a("h1",{staticClass:"subtitle has-margin-left-7"},[e._v(e._s(e.title))])]),a("b-menu",[a("b-menu-list",{attrs:{label:"Navigation"}},[a("b-menu-item",{attrs:{icon:"home fa-fw fa-mr"},scopedSlots:e._u([{key:"label",fn:function(t){return[e._v(" Pièces "),a("i",{staticClass:"is-pulled-right fa",class:t.expanded?"fa-caret-down":"fa-caret-up"})]}}])},[a("b-menu-item",{attrs:{to:{name:"rooms"},label:"Tous",tag:"router-link"}}),e._l(e.ordered,(function(e){return a("b-menu-item",{key:e.id,attrs:{to:{name:"room",params:{id:e.id}},label:e.name,tag:"router-link"}})}))],2),e.tagsList.length?a("b-menu-item",{attrs:{icon:"tags fa-fw fa-mr"},scopedSlots:e._u([{key:"label",fn:function(t){return[e._v(" Catégories "),a("i",{staticClass:"is-pulled-right fa",class:t.expanded?"fa-caret-down":"fa-caret-up"})]}}],null,!1,1701464297)},e._l(e.tagsList,(function(e){return a("b-menu-item",{key:e,attrs:{to:{name:"tag",params:{tag:e}},label:e,tag:"router-link"}})})),1):e._e(),a("b-menu-item",{attrs:{icon:"book fa-fw fa-mr",to:{name:"scenarios"},tag:"router-link"}},[a("template",{slot:"label"},[e._v(" Scénarios ")])],2),a("b-menu-item",{attrs:{icon:"info-circle fa-fw fa-mr",tag:"router-link",to:{name:"about"}}},[a("template",{slot:"label"},[e._v(" A propos ")])],2),a("b-menu-item",{attrs:{icon:"bug fa-fw fa-mr",tag:"a",href:e.bugUrl,target:"_blank",rel:"noreferrer"}},[a("template",{slot:"label"},[e._v(" Bug ")])],2),a("b-menu-item",{attrs:{icon:"bell fa-fw fa-mr",tag:"router-link",to:{name:"notifications"}}},[a("template",{slot:"label"},[e._v(" Notifications "),a("notifications-counter",{attrs:{"class-name":"is-inline has-margin-left-8","is-link":!1}})],1)],2),e.hasRole("user")?a("b-menu-item",{attrs:{icon:"user fa-fw fa-mr",tag:"router-link",to:{name:"profile"}}},[a("template",{slot:"label"},[e._v(" Profile ")])],2):e._e(),e.hasRole("admin")?a("b-menu-item",{attrs:{icon:"tools fa-fw fa-mr"},scopedSlots:e._u([{key:"label",fn:function(t){return[e._v(" Admin "),a("i",{staticClass:"is-pulled-right fa",class:t.expanded?"fa-caret-down":"fa-caret-up"})]}}],null,!1,2639950556)},[a("b-menu-item",{attrs:{to:{name:"admin-system"},label:"Système",tag:"router-link"}}),a("b-menu-item",{attrs:{to:{name:"admin-users"},label:"Utilisateurs",tag:"router-link"}}),a("b-menu-item",{attrs:{to:{name:"admin-rooms"},label:"Pièces",tag:"router-link"}}),a("b-menu-item",{attrs:{to:{name:"admin-equipments"},label:"Équipement",tag:"router-link"}}),a("b-menu-item",{attrs:{to:{name:"admin-states"},label:"États",tag:"router-link"}}),a("b-menu-item",{attrs:{to:{name:"admin-actions"},label:"Actions",tag:"router-link"}}),a("b-menu-item",{attrs:{to:{name:"admin-scenarios"},label:"Scénarios",tag:"router-link"}})],1):e._e()],1),a("b-menu-list",{attrs:{label:"Actions"}},[a("b-menu-item",{attrs:{icon:"sync-alt fa-fw fa-mr",tag:"a"},on:{click:e.refreshData}},[a("template",{slot:"label"},[e._v(" Rafraichir les données ")])],2),a("b-menu-item",{attrs:{icon:"sign-out-alt fa-fw fa-mr",tag:"a"},on:{click:e.logout}},[a("template",{slot:"label"},[e._v(" Logout ")])],2),a("b-menu-item",{attrs:{icon:e.isDarkMode?"toggle-on fa-fw fa-mr":"toggle-off fa-fw fa-mr",tag:"a"},on:{click:e.setDarkMode}},[a("template",{slot:"label"},[e._v(" Mode sombre ")])],2)],1)],1)],1)])},Jt=[],Qt=n("9224"),Kt=Object(r["a"])("app"),Xt=Kt.mapState,Zt=Kt.mapMutations,en=window.custom,tn={name:"Sidebar",components:{NotificationsCounter:$t},mixins:[ee],data:function(){return{title:en.title,bugUrl:Qt["a"].url,isDarkMode:!1}},computed:Object(s["a"])({open:{get:function(){return this.hasSidebarOpened},set:function(e){this.setSidebarStatus(e)}},ordered:function(){var e=this;return this.roomsOrdered.filter((function(t){return e.getRoomVisiblesEquipment(t.id).length>0}))}},Xt(["hasSidebarOpened","roles"])),created:function(){localStorage.getItem("darkMode")&&(this.isDarkMode=!0)},methods:Object(s["a"])({hasRole:function(e){return this.roles.includes(e)},refreshData:function(){this.loadRooms(),this.open=!1},setDarkMode:function(){this.isDarkMode=!this.isDarkMode,this.isDarkMode?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("darkMode","1")):(document.documentElement.removeAttribute("data-theme"),localStorage.removeItem("darkMode")),this.open=!1},logout:function(){this.$Provider.closeEventsListener(),D.logout(),this.$router.replace({name:"login"})}},Zt(["setSidebarStatus"]))},nn=tn,an=Object(B["a"])(nn,Wt,Jt,!1,null,null,null),rn=an.exports,sn=Object(r["a"])("app"),on=sn.mapState,un=sn.mapMutations,cn=Object(r["a"])("data"),ln=cn.mapActions,mn={components:{Navbar:Yt,Sidebar:rn},data:function(){return{isReady:!1,refreshing:!1,registration:null}},computed:Object(s["a"])({},on(["isAuthenticated","information"])),watch:{isAuthenticated:function(){this.isAuthenticated&&this.loadRooms(),this.openEventsListener()},information:function(e){if(e.message){var t={message:e.message,type:e.type};e.position&&(t.position=e.position),e.duration&&(t.duration=e.duration),this.$buefy.toast.open(t)}}},created:function(){var e=this;localStorage.getItem("darkMode")?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.removeAttribute("data-theme"),document.addEventListener("updated",this.askForRefresh,{once:!0}),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",(function(){e.refreshing||(e.refreshing=!0,window.location.reload())})),this.isAuthenticated&&this.loadRooms(),this.setNetworkStatus(window.navigator.onLine),window.addEventListener("offline",this.notifyConnectivity),window.addEventListener("online",this.notifyConnectivity),this.openEventsListener(),this.isReady=!0},methods:Object(s["a"])(Object(s["a"])({askForRefresh:function(e){var t=this;this.registration=e.detail,this.$buefy.dialog.confirm({title:"Mise à jour",message:"Une mise à jour a été téléchargée, souhaitez-vous recharger l'application ?",cancelText:"Plus tard",hasIcon:!0,icon:"sync-alt",iconPack:"fa",onConfirm:function(){return t.refreshApp()}})},refreshApp:function(){this.registration&&this.registration.waiting&&this.registration.waiting.postMessage("skipWaiting")},notifyConnectivity:function(e){this.setNetworkStatus(window.navigator.onLine),"online"===e.type&&this.openEventsListener()},openEventsListener:function(){this.isAuthenticated&&this.$Provider.openEventsListener(!0,!1)}},ln(["loadRooms"])),un(["setNetworkStatus"]))},dn=mn,pn=Object(B["a"])(dn,ft,bt,!1,null,null,null),fn=pn.exports,bn=(n("b2a2"),n("8890"),n("6755"),n("2fc4"),n("9483"));Object(bn["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(e){console.log("New content is available; ask for refreshing."),document.dispatchEvent(new CustomEvent("updated",{detail:e}))},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),a["a"].use(pt.a,{moment:We.a}),a["a"].use(V,{store:_}),a["a"].use(mt),a["a"].config.productionTip=!1,D.restoreUser(),new a["a"]({store:_,router:Ge,render:function(e){return e(fn)}}).$mount("#vue-dom")},"647b":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("5530"),r=n("2f62"),i=Object(r["a"])("data"),s=i.mapGetters,o=i.mapActions,u={computed:Object(a["a"])({},s(["getStateById","getActionById","getStatesByEquipmentId","getActionsByEquipmentId","getStatesByIds","getActionsByIds","getStateStatisticsById"])),methods:Object(a["a"])({getBatteryLevelIconClass:function(e){var t="fa fa-battery-full";return e<20?t="fa fa-battery-empty":e<40?t="fa fa-battery-quarter":e<60?t="fa fa-battery-half":e<80&&(t="fa fa-battery-three-quarters"),t},getIconClass:function(e){switch(e.logicalId){case"refresh":return"fa fa-sync-alt";case"wol":return"fa fa-bolt"}if(e.genericType)switch(e.genericType){case"HUMIDITY":case"RAIN_CURRENT":return"fa fa-tint";case"TEMPERATURE":var t=e.minValue||0,n=e.maxValue||100,a=(n-t)/5;return e.currentValue<t+a?"fa fa-thermometer-empty":e.currentValue<t+2*a?"fa fa-thermometer-quarter":e.currentValue<t+3*a?"fa fa-thermometer-half":e.currentValue<t+4*a?"fa fa-thermometer-three-quarters":"fa fa-thermometer-full";case"LIGHT_STATE":return"fas fa-lightbulb";case"CO2":return"fa fa-bullseye";case"PRESENCE":return"fas fa-eye";case"WIND_DIRECTION":return"far fa-compass";case"WIND_SPEED":return"fas fa-wind";case"VOLTAGE":case"POWER":return"fa fa-bolt";case"CAMERA_RECORD_STATE":return"fas fa-video";case"ENERGY_STATE":return"fas fa-power-off";case"IP_ADDRESS":return"fas fa-at";case"STATUS":return"fas fa-toggle-on";case"DOWNLOAD":return"fas fa-arrow-down";case"UPLOAD":return"fas fa-arrow-up";case"SIGNAL_QUALITY":return"fas fa-signal";case"RATE":return"fas fa-tachometer-alt";case"WIFI":return"fas fa-wifi";case"MAP":return"fas fa-sitemap";case"CONNECTION_TYPE":return"fas fa-project-diagram"}return e.icon?e.icon:"fa fa-question"}},o(["executeAction","loadStateStatistics"]))}},"68f1":function(e,t,n){},"7b8a":function(e,t,n){"use strict";n("a9e3");var a,r,i={name:"TimeAgo",props:{date:{type:String,required:!0},tag:{type:String,default:"span"},dropFixes:{type:Boolean,default:!1},interval:{type:Number,default:3e4}},data:function(){return{fromNow:this.$moment(this.date).fromNow(this.dropFixes),intervalId:null}},watch:{date:function(){this.updateFromNow()}},mounted:function(){this.intervalId=setInterval(this.updateFromNow,this.interval)},beforeDestroy:function(){clearInterval(this.intervalId)},methods:{updateFromNow:function(){var e=this.$moment(this.date).fromNow(this.dropFixes);e!==this.fromNow&&(this.fromNow=e)}},render:function(e){return e(this.tag,this.fromNow)}},s=i,o=n("2877"),u=Object(o["a"])(s,a,r,!1,null,null,null);t["a"]=u.exports},9224:function(e){e.exports=JSON.parse('{"d":"0.5.0","b":"https://github.com/nioc/vue-dom","a":{"url":"https://github.com/nioc/vue-dom/issues"},"c":"AGPL-3.0-or-later","e":{"name":"VueDom","description":"<p><b>VueDom</b> est un client web pour solution domotique (actuellement compatible avec <a href=\'https://www.jeedom.com\' target=\'_blank\' rel=\'noreferrer\'>Jeedom</a>).</p><p>Il s\'appuie sur les composants open-sources suivants :</p><ul><li>VueJS</li><li>Bulma</li></ul><p>En cas de problème ou pour toute suggestion, merci de créer un <a href=\'https://github.com/nioc/vue-dom/issues\' target=\'_blank\' rel=\'noreferrer\'>ticket</a>.</p>","latestReleaseUrl":"https://api.github.com/repos/nioc/vue-dom/releases/latest"}}')},"9dc3":function(e,t,n){var a={"./fr":"9f26","./fr.js":"9f26"};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id="9dc3"},a464:function(e,t,n){"use strict";n.r(t),n.d(t,"DemoApi",(function(){return g}));n("4de4"),n("7db0"),n("c740"),n("4160"),n("d81d"),n("a434"),n("a9e3"),n("c35a"),n("d3b7"),n("ac1f"),n("25f0"),n("1276"),n("4c53"),n("159b"),n("96cf");var a=n("1da1"),r=n("2909"),i=n("2b0e"),s=new i["a"],o=n("cd3f"),u={users:[{id:"1",login:"demo",roles:["admin","write"],email:"demo@domain.ltd",isActive:!0},{id:"2",login:"demo-2",roles:["write"],email:"admin@domain.ltd",isActive:!0}],tokens:[{id:"1234",issuedDate:s.$moment().subtract(1424,"minutes").format(),userAgent:"Mozilla/5.0 (Android 9; Mobile; rv:84.0) Gecko/84.0 Firefox/84.0",ip:"10.0.0.21",token:"abcd1234-1234-1234-abcd-abcd1234abcd"},{id:"5678",issuedDate:s.$moment().format(),userAgent:"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:84.0) Gecko/20100101 Firefox/84.0",ip:"10.0.0.53",token:"abcd1234-5678-5678-abcd-abcd5678abcd"}],rooms:[{id:"1",name:"Maison",parentId:null,isVisible:!0,summary:[{key:"temperature",value:21.3},{key:"humidity",value:41},{key:"download",value:62},{key:"upload",value:6},{key:"power",value:1250}],summaryStates:[{state:"11",key:"temperature"},{state:"16",key:"temperature"},{state:"14",key:"humidity"},{state:"15",key:"humidity"},{state:"4",key:"power"},{state:"200",key:"download"},{state:"201",key:"upload"}]},{id:"2",name:"Extérieur",parentId:"1",isVisible:!0,summary:[{key:"temperature",value:12},{key:"humidity",value:90}],summaryStates:[{state:"5",key:"temperature"},{state:"6",key:"humidity"}]},{id:"3",name:"Séjour",parentId:"1",isVisible:!0,summary:[{key:"temperature",value:22},{key:"humidity",value:41}],summaryStates:[{state:"16",key:"temperature"},{state:"15",key:"humidity"}]},{id:"4",name:"Chambre",parentId:"1",isVisible:!0,summary:[{key:"temperature",value:21},{key:"humidity",value:42}],summaryStates:[{state:"11",key:"temperature"},{state:"14",key:"humidity"}]},{id:"5",name:"Cuisine",parentId:"1",isVisible:!0,summary:[{key:"light",value:0}],summaryStates:[{state:"170",key:"light"}]}],equipments:[{id:"1",logicalId:"domonode",roomId:"1",module:"core",name:"Domonode",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(2,"days").format(),tags:[]},{id:"2",logicalId:"conso",roomId:"1",module:"enedis",name:"Consommation électrique",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(30,"seconds").format(),tags:[]},{id:"3",logicalId:"02:00:00:00:00:00",roomId:"2",module:"netatmo",name:"Météo (extérieure)",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(20,"minutes").format(),battery:46,hasLowBattery:!1,hasNoCommunication:!0,alertNoCommunicationDelay:15,tags:["Météo"]},{id:"4",logicalId:"04:00:00:00:00:00:fa",roomId:"4",module:"netatmo",name:"Météo (Chambre)",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(5,"minutes").format(),battery:68,hasLowBattery:!1,hasNoCommunication:null,alertNoCommunicationDelay:15,tags:["Météo"]},{id:"5",logicalId:"05:00:00:04:c5:b8",roomId:"2",module:"netatmo",name:"Pluviomètre",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(5,"minutes").format(),battery:40,hasLowBattery:!1,hasNoCommunication:null,alertNoCommunicationDelay:15,tags:["Météo"]},{id:"6",logicalId:"06:00:00:00:00:00",roomId:"2",module:"netatmo",name:"Anémomètre",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(5,"minutes").format(),battery:62,hasLowBattery:!1,hasNoCommunication:null,alertNoCommunicationDelay:15,tags:["Météo"]},{id:"8",logicalId:"70:00:00:00:00:00",roomId:"3",module:"netatmo",name:"Météo (Salon)",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(5,"minutes").format(),hasNoCommunication:null,alertNoCommunicationDelay:15,tags:["Météo"]},{id:"9",logicalId:"xmpp",roomId:"1",module:"xmpp",name:"XMPP",isVisible:!1,isActive:!0,lastCommunication:s.$moment().subtract(3,"day").format(),tags:[]},{id:"10",logicalId:"livebox",roomId:"1",module:"livebox",name:"Livebox",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(3,"minutes").format(),alertNoCommunicationDelay:10,tags:["Réseau"]},{id:"23",logicalId:"10/4/181",roomId:"5",module:"knx",name:"Volet cuisine",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(1,"day").format(),hasNoCommunication:null,tags:["Volets"]},{id:"29",logicalId:"10/4/224",roomId:"4",module:"knx",name:"Volet chambre",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(1,"day").format(),hasNoCommunication:null,tags:["Volets"]},{id:"17",logicalId:"10/4/107",roomId:"5",module:"knx",name:"Plafonnier cuisine",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(1,"day").format(),hasNoCommunication:null,tags:[]},{id:"20",logicalId:"24/4/25",roomId:"4",module:"knx",name:"Plafonnier chambre",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(1,"day").format(),hasNoCommunication:null,tags:[]},{id:"101",logicalId:"plafonnier-sejour",roomId:"3",module:"knx",name:"Plafonnier séjour",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(1,"day").format(),hasNoCommunication:null,tags:[]},{id:"102",logicalId:"volet-sejour",roomId:"3",module:"knx",name:"Volet séjour",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(4,"hours").format(),hasNoCommunication:null,tags:["Volets"]},{id:"40",logicalId:"69000",roomId:"2",module:"rain",name:"Prévisions de pluie",isVisible:!0,isActive:!0,lastCommunication:s.$moment().subtract(15,"minutes").format(),hasNoCommunication:null,tags:["Météo"]}],actions:[{id:"1",logicalId:"log",name:"Log",eqId:"1",module:"core",type:"button",isVisible:!1,icon:"far fa-edit"},{id:"2",logicalId:"generic-update-state",name:"Update state",eqId:"1",module:"core",type:"button",params:{stateId:"1",value:"holidays"},paramsType:"json",isVisible:!1},{id:"3",logicalId:"update-state-holidays-off",name:"Congés off",eqId:"1",module:"core",type:"switch_off",params:{stateId:"1",value:0},paramsType:"json",isVisible:!0,stateFeedbackId:"1"},{id:"4",logicalId:"update-state-holidays-on",name:"Congés on",eqId:"1",module:"core",type:"switch_on",params:{stateId:"1",value:1},paramsType:"json",isVisible:!0,stateFeedbackId:"1"},{id:"5",logicalId:"demo@domain.ltd",name:"Message à l'utilisateur",eqId:"9",module:"xmpp",type:"button",params:"Coucou",paramsType:"string",options:[{value:"J'éteins la lumière ?",label:""},{value:"Je ferme les volets ?",label:""}],isVisible:!1,isAsk:!0,icon:"fa fa-comment",stateFeedbackId:"17"},{id:"100",logicalId:"10/4/111",name:"Intensité",eqId:"101",module:"knx",type:"slider",paramsType:"json",params:{value:0},isVisible:!0,stateFeedbackId:"100"},{id:"101",logicalId:"24/4/24",name:"switch",eqId:"20",module:"knx",type:"switch",paramsType:"json",params:{value:1},isVisible:!0,stateFeedbackId:"101"},{id:"170",logicalId:"10/4/107",name:"switch",eqId:"17",module:"knx",type:"switch",paramsType:"json",params:{value:1},isVisible:!0,stateFeedbackId:"170"},{id:"102",logicalId:"10/4/175",name:"Montée",eqId:"102",module:"knx",type:"button",paramsType:"json",params:{value:1},isVisible:!0,icon:"fas fa-angle-double-up"},{id:"103",logicalId:"10/4/176",name:"Arrêt",eqId:"102",module:"knx",type:"button",paramsType:"json",params:{value:1},isVisible:!0,icon:"fas fa-stop"},{id:"104",logicalId:"10/4/175",name:"Descente",eqId:"102",module:"knx",type:"button",paramsType:"json",params:{value:0},isVisible:!0,icon:"fas fa-angle-double-down"},{id:"105",logicalId:"10/4/224",name:"Montée",eqId:"29",module:"knx",type:"button",paramsType:"json",params:{value:1},isVisible:!0,icon:"fas fa-angle-double-up"},{id:"106",logicalId:"10/4/223",name:"Arrêt",eqId:"29",module:"knx",type:"button",paramsType:"json",params:{value:1},isVisible:!0,icon:"fas fa-stop"},{id:"107",logicalId:"10/4/224",name:"Descente",eqId:"29",module:"knx",type:"button",paramsType:"json",params:{value:0},isVisible:!0,icon:"fas fa-angle-double-down"},{id:"108",logicalId:"10/4/181",name:"Montée",eqId:"23",module:"knx",type:"button",paramsType:"json",params:{value:1},isVisible:!0,icon:"fas fa-angle-double-up"},{id:"109",logicalId:"10/4/180",name:"Arrêt",eqId:"23",module:"knx",type:"button",paramsType:"json",params:{value:1},isVisible:!0,icon:"fas fa-stop"},{id:"110",logicalId:"10/4/181",name:"Descente",eqId:"23",module:"knx",type:"button",paramsType:"json",params:{value:0},isVisible:!0,icon:"fas fa-angle-double-down"},{id:"200",logicalId:"reboot",name:"Reboot",eqId:"10",module:"knx",type:"button",paramsType:"string",params:"",isVisible:!0,icon:"fas fa-redo-alt"}],states:[{id:"1",logicalId:"mode",name:"Mode congés",eqId:"1",module:"core",type:"boolean",currentValue:0,isVisible:!0,date:s.$moment().subtract(2,"days").format(),icon:"fa fa-bed"},{id:"4",logicalId:"puissance-instantanee",name:"Puissance",eqId:"2",module:"enedis",type:"numeric",currentValue:1250,isVisible:!0,icon:"fa fa-bolt",isHistorized:!0,date:s.$moment().subtract(30,"seconds").format(),unit:"kW"},{id:"2",logicalId:"06:00:00:00:00:00#WindAngle",name:"Direction",eqId:"6",module:"netatmo",type:"numeric",genericType:"WIND_DIRECTION",isVisible:!0,currentValue:"315",date:s.$moment().subtract(5,"minutes").format(),unit:"°"},{id:"3",logicalId:"06:00:00:00:00:00#WindStrength",name:"Vitesse",eqId:"6",module:"netatmo",type:"numeric",genericType:"WIND_SPEED",isHistorized:!0,isVisible:!0,currentValue:"1",date:s.$moment().subtract(5,"minutes").format(),unit:"km/h"},{id:"5",logicalId:"02:00:00:00:00:00#Temperature",name:"Temperature",eqId:"3",module:"netatmo",type:"numeric",genericType:"TEMPERATURE",isHistorized:!0,isVisible:!0,currentValue:"12.8",date:s.$moment().subtract(20,"minutes").format(),unit:"°C"},{id:"6",logicalId:"02:00:00:00:00:00#Humidity",name:"Humidité",eqId:"3",module:"netatmo",type:"numeric",genericType:"HUMIDITY",isHistorized:!0,isVisible:!0,currentValue:"90",date:s.$moment().subtract(20,"minutes").format(),unit:"%"},{id:"7",logicalId:"70:00:00:00:00:00#CO2",name:"CO2",eqId:"8",module:"netatmo",type:"numeric",genericType:"CO2",isHistorized:!0,isVisible:!0,currentValue:"749",date:s.$moment().subtract(5,"minutes").format(),unit:"ppm"},{id:"11",logicalId:"04:00:00:00:00:00:fa#Temperature",name:"Temperature",eqId:"4",module:"netatmo",type:"numeric",genericType:"TEMPERATURE",isHistorized:!0,isVisible:!0,currentValue:"20.6",date:s.$moment().subtract(5,"minutes").format(),unit:"°C"},{id:"12",logicalId:"05:00:00:04:c5:b8#sum_rain_1",name:"Pluie",eqId:"5",module:"netatmo",type:"numeric",genericType:"RAIN_SUM",isHistorized:!0,isVisible:!0,currentValue:"0.5",date:s.$moment().subtract(5,"minutes").format(),unit:"mm/h",icon:"fas fa-cloud-showers-heavy"},{id:"13",logicalId:"04:00:00:00:00:00:fa#CO2",name:"CO2",eqId:"4",module:"netatmo",type:"numeric",genericType:"CO2",isHistorized:!0,isVisible:!0,currentValue:"693",date:s.$moment().subtract(5,"minutes").format(),unit:"ppm"},{id:"14",logicalId:"04:00:00:00:00:00:fa#Humidity",name:"Humidité",eqId:"4",module:"netatmo",type:"numeric",genericType:"HUMIDITY",isHistorized:!0,isVisible:!0,currentValue:"42",date:s.$moment().subtract(5,"minutes").format(),unit:"%"},{id:"15",logicalId:"70:00:00:00:00:00#Humidity",name:"Humidité",eqId:"8",module:"netatmo",type:"numeric",genericType:"HUMIDITY",isHistorized:!0,isVisible:!0,currentValue:"41",date:s.$moment().subtract(5,"minutes").format(),unit:"%"},{id:"16",logicalId:"70:00:00:00:00:00#Temperature",name:"Temperature",eqId:"8",module:"netatmo",type:"numeric",genericType:"TEMPERATURE",isHistorized:!0,isVisible:!0,currentValue:"22",date:s.$moment().subtract(5,"minutes").format(),unit:"°C"},{id:"17",logicalId:"demo@domain.ltd",name:"Message de l'utilisateur",eqId:"9",module:"xmpp",type:"string",isVisible:!1,currentValue:"Hello",date:s.$moment().subtract(3,"day").format()},{id:"81",logicalId:"forecastDate",name:"forecast date",eqId:"40",module:"rain",isVisible:!0,currentValue:s.$moment().format(),date:s.$moment().format()},{id:"82",logicalId:"prev0",name:"Prévision 00-05",eqId:"40",module:"rain",type:"numeric",isVisible:!0,currentValue:"1",date:s.$moment().format()},{id:"83",logicalId:"prev1",name:"Prévision 05-10",eqId:"40",module:"rain",type:"numeric",isVisible:!0,currentValue:"1",date:s.$moment().format()},{id:"84",logicalId:"prev2",name:"Prévision 10-15",eqId:"40",module:"rain",type:"numeric",isVisible:!0,currentValue:"1",date:s.$moment().format()},{id:"85",logicalId:"prev3",name:"Prévision 15-20",eqId:"40",module:"rain",type:"numeric",isVisible:!0,currentValue:"1",date:s.$moment().format()},{id:"86",logicalId:"prev4",name:"Prévision 20-25",eqId:"40",module:"rain",type:"numeric",isVisible:!0,currentValue:"1",date:s.$moment().format()},{id:"87",logicalId:"prev5",name:"Prévision 25-30",eqId:"40",module:"rain",type:"numeric",isVisible:!0,currentValue:"1",date:s.$moment().format()},{id:"88",logicalId:"prev6",name:"Prévision 30-35",eqId:"40",module:"rain",type:"numeric",isVisible:!0,currentValue:"1",date:s.$moment().format()},{id:"89",logicalId:"prev7",name:"Prévision 35-40",eqId:"40",module:"rain",type:"numeric",isVisible:!0,currentValue:"1",date:s.$moment().format()},{id:"90",logicalId:"prev8",name:"Prévision 40-45",eqId:"40",module:"rain",type:"numeric",isVisible:!0,currentValue:"1",date:s.$moment().format()},{id:"91",logicalId:"prev9",name:"Prévision 45-50",eqId:"40",module:"rain",type:"numeric",isVisible:!0,currentValue:"2",date:s.$moment().format()},{id:"92",logicalId:"prev10",name:"Prévision 50-55",eqId:"40",module:"rain",type:"numeric",isVisible:!0,currentValue:"3",date:s.$moment().format()},{id:"93",logicalId:"prev11",name:"Prévision 55-60",eqId:"40",module:"rain",type:"numeric",isVisible:!0,currentValue:"1",date:s.$moment().format()},{id:"100",logicalId:"10/4/111",name:"Intensité",eqId:"101",module:"knx",type:"numeric",genericType:"LIGHT_STATE",isVisible:!0,currentValue:"0",date:s.$moment().subtract(1,"day").format()},{id:"101",logicalId:"24/4/25",name:"État",eqId:"20",module:"knx",type:"boolean",genericType:"LIGHT_STATE",isVisible:!0,currentValue:"0",date:s.$moment().subtract(1,"day").format()},{id:"170",logicalId:"10/4/108",name:"État",eqId:"17",module:"knx",type:"boolean",genericType:"LIGHT_STATE",isVisible:!0,currentValue:"0",date:s.$moment().subtract(1,"day").format()},{id:"200",logicalId:"download",name:"Download",eqId:"10",module:"livebox",type:"numeric",genericType:"DOWNLOAD",isVisible:!0,currentValue:"62",unit:"KB/s",date:s.$moment().subtract(3,"minutes").format()},{id:"201",logicalId:"upload",name:"Upload",eqId:"10",module:"livebox",type:"numeric",genericType:"UPLOAD",isVisible:!0,currentValue:"6",unit:"KB/s",date:s.$moment().subtract(3,"minutes").format()}],scenarios:[{id:"1",isVisible:!1,isActive:!0,triggers:[{type:"state",value:"5"}],elements:[{type:"rule",definition:{type:"any",criterias:[{fact:"5",operator:"lte",value:0}],onValidElements:[{type:"action",definition:{id:"5",paramsType:"jsonata",params:"'Risque de gel, la température extérieure est de '&_5&'°C'"},isActive:!0}],onInvalidElements:[],skipRepeated:!0},isActive:!0}],name:"Alerte gel",lastExecution:s.$moment().subtract(1,"days").format()},{id:"2",isVisible:!1,isActive:!0,triggers:[{type:"datetime",value:"0 0 8 * * *"}],elements:[{type:"rule",definition:{type:"any",criterias:[{fact:"1",operator:"e",value:"0"}],onValidElements:[{type:"action",definition:{id:"105",paramsType:"string",params:null},isActive:!0},{type:"action",definition:{id:"108",paramsType:"string",params:null},isActive:!0},{type:"action",definition:{id:"102",paramsType:"string",params:null},isActive:!0}],onInvalidElements:[]},isActive:!0}],name:"Ouverture automatique des volets"},{id:"3",isVisible:!0,isActive:!0,triggers:[],elements:[{type:"action",definition:{id:"105",paramsType:"string",params:null},isActive:!0},{type:"action",definition:{id:"108",paramsType:"string",params:null},isActive:!0},{type:"action",definition:{id:"102",paramsType:"string",params:null},isActive:!0}],name:"Ouverture de tous les volets"}],jobs:[{id:"system-communication-check",name:"[System] Vérification de la communication des équipements",isRunning:!0,cronTime:"0 */15 * * * *",lastDate:s.$moment().subtract(2,"minutes").format(),nextDate:s.$moment().add(13,"minutes").format()}],queries:[{query:"La porte est-elle fermée",reply:"La porte est fermée"},{query:"L'alarme est-elle enclenchée",reply:"L'alarme est enclenchée"},{query:"Quelle est la température du salon",reply:"Il fait 22°C dans le salon"},{query:"Quelle est la température de la chambre",reply:"Il fait 21°C dans la chambre"},{query:"Va-t-il pleuvoir",reply:"Voici les prévisions de pluie :\\n\\nActuellement : 0 mm/h.\\nD'ici 1 heure : Pas de précipitations."}],notifications:[{id:"1",date:s.$moment().subtract(532,"minutes").format(),plugin:"netatmo",message:"Erreur lors de la récupération des données",action:""},{id:"2",date:s.$moment().subtract(150,"minutes").format(),plugin:"scenario",message:"Le scénario a rencontré une erreur",action:""}],logs:[{message:'[WS] Utilisateur "demo" authentifié (IP: 10.0.0.53)',level:"info",service:"core",timestamp:s.$moment().format()},{message:"Lancement du scénario #1",level:"debug",service:"core",timestamp:s.$moment().subtract(42,"minutes").format()}]};function c(e){return o(u[e])}function l(e,t){var n=o(u[e].filter((function(e){var n=!0;for(var a in t)e[a]!==t[a]&&(n=!1);return n})));return n}function m(e,t){var n=o(u[e].find((function(e){return e.id===t})));return n}function d(e,t){return t.id=(Math.max.apply(Math,u[e].map((function(e){return parseInt(e.id)})))+1).toString(),u[e].push(t),o(t)}function p(e,t){return u[e].forEach((function(e){e.id===t.id&&(e=Object.assign(e,t))})),o(t)}function f(e,t){var n=u[e].findIndex((function(e){return e.id===t}));u[e].splice(n,1)}function b(){var e=Math.floor(1250*(.9+Math.random()/4));return[{type:"stateUpdate",payload:{id:"4",currentValue:e,date:s.$moment().format()}},{type:"equipmentUpdate",payload:{id:"2",roomId:"1",lastCommunication:s.$moment().format()}},{type:"roomSummaryUpdate",payload:{id:"1",key:"power",value:e}},{type:"roomSummaryUpdate",payload:{id:"global",key:"power",value:e}}]}var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=null,i=null;function s(e){var n=[];switch(e.type){case"roomSummaryUpdate":e.payload.key=e.payload.key.toLowerCase(),t.commit("data/saveRoomSummary",e.payload);break;case"equipmentUpdate":t.commit("data/updateEquipments",[e.payload]);break;case"stateUpdate":n.push({id:e.payload.id,currentValue:e.payload.currentValue,date:e.payload.date});break}n.length>0&&t.commit("data/updateStates",n)}return{authenticate:function(e,t){return{access_token:"eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxIiwibmFtZSI6ImRlbW8iLCJzY29wZSI6ImFkbWluIHdyaXRlIiwiaWF0IjoxNjEwOTMxMzM5LCJleHAiOjE5MzY4NTEzMzksImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3QifQ.sign"}},setAuthentication:function(e){n=e.access_token},getAllRoles:function(){return["admin","write","system"]},getRoles:function(e){var t=["user"];if(e.access_token)try{var n=JSON.parse(atob(e.access_token.split(".")[1]));t.push.apply(t,Object(r["a"])(n.scope.split(" ")))}catch(a){console.warn("JWT parsing failed",a)}return t},getUserId:function(e){if(e.access_token)try{var t=JSON.parse(atob(e.access_token.split(".")[1]));return t.sub}catch(n){return void console.warn("JWT parsing failed",n)}},openEventsListener:function(e){if(t.state.app.hasNetwork,!n)return console.warn("Missing API key"),t.commit("app/setInformation",{type:"is-danger",message:"Erreur d'authentification, veuillez-vous reconnecter"}),void t.commit("app/setUser",{login:null,isAuthenticated:!1});i?console.warn("Socket already opened"):(i=setInterval((function(){b().forEach(s)}),3e4),t.commit("app/setEventsListenerStatus",!0))},closeEventsListener:function(){i&&(clearInterval(i),i=null,t.commit("app/setEventsListenerStatus",!1))},getRooms:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=c("rooms"),e&&n.forEach((function(e){var t=l("equipments",{roomId:e.id});t.forEach((function(e){e.states=l("states",{eqId:e.id}),e.actions=l("actions",{eqId:e.id})})),e.equipments=t})),t.abrupt("return",n);case 3:case"end":return t.stop()}}),t)})))()},getRoom:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=m("rooms",e),r=l("equipments",{roomId:a.id}),a.equipments=r,t||delete a.summaryStates,n.abrupt("return",a);case 5:case"end":return n.stop()}}),n)})))()},createRoom:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",d("rooms",e));case 1:case"end":return t.stop()}}),t)})))()},updateRoom:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",p("rooms",e));case 1:case"end":return t.stop()}}),t)})))()},deleteRoom:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:f("rooms",e);case 1:case"end":return t.stop()}}),t)})))()},getSummary:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},m("rooms","1").summary.forEach((function(e){t[e.key]=e.value})),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))()},getRoomSummary:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})))()},getEquipments:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=c("equipments"),a.forEach((function(n){e&&(n.actions=l("actions",{eqId:n.id})),t&&(n.states=l("states",{eqId:n.id}))})),n.abrupt("return",a);case 3:case"end":return n.stop()}}),n)})))()},getEquipment:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=m("equipments",e),n.states=l("states",{eqId:n.id}),n.actions=l("actions",{eqId:n.id}),t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()},createEquipment:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",d("equipments",e));case 1:case"end":return t.stop()}}),t)})))()},updateEquipment:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",p("equipments",e));case 1:case"end":return t.stop()}}),t)})))()},deleteEquipment:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:f("equipments",e);case 1:case"end":return t.stop()}}),t)})))()},getStates:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c("states"));case 1:case"end":return e.stop()}}),e)})))()},getState:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",m("states",e));case 1:case"end":return t.stop()}}),t)})))()},createState:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",d("states",e));case 1:case"end":return t.stop()}}),t)})))()},updateState:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",p("states",e));case 1:case"end":return t.stop()}}),t)})))()},deleteState:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:f("states",e);case 1:case"end":return t.stop()}}),t)})))()},getActions:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c("actions"));case 1:case"end":return e.stop()}}),e)})))()},getAction:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",m("actions",e));case 1:case"end":return t.stop()}}),t)})))()},createAction:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",d("actions",e));case 1:case"end":return t.stop()}}),t)})))()},updateAction:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",p("actions",e));case 1:case"end":return t.stop()}}),t)})))()},deleteAction:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:f("actions",e);case 1:case"end":return t.stop()}}),t)})))()},getUsers:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c("users"));case 1:case"end":return e.stop()}}),e)})))()},getUser:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=m("users",e),n){t.next=3;break}throw new Error("unkwnow");case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()},createUser:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.roles=[],e.isActive=!1,t.abrupt("return",d("users",e));case 3:case"end":return t.stop()}}),t)})))()},updateUser:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",p("users",e));case 1:case"end":return t.stop()}}),t)})))()},updateUserPassword:function(e,t){return 1},deleteUser:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:f("users",e);case 1:case"end":return t.stop()}}),t)})))()},getUserTokens:function(e){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c("tokens"));case 1:case"end":return e.stop()}}),e)})))()},deleteUserToken:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f("tokens",t);case 1:case"end":return e.stop()}}),e)})))()},executeAction:function(t){var n=arguments;return Object(a["a"])(regeneratorRuntime.mark((function a(){var r,i,o,u,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{},i=m("actions",t),!i.stateFeedbackId){a.next=14;break}return r&&(Object.prototype.hasOwnProperty.call(r,"slider")&&(r.value=r.slider,delete r.slider),Object.prototype.hasOwnProperty.call(r,"select")&&(r.value=r.select,delete r.select),i.params=Object.assign(i.params,r)),o=m("states",i.stateFeedbackId),o.currentValue=i.params.value,o.date=e.moment().format(),p("states",o),s({type:"stateUpdate",payload:o}),u=m("equipments",o.eqId),u.lastCommunication=o.date,p("equipments",u),s({type:"equipmentUpdate",payload:u}),a.abrupt("return");case 14:c=m("equipments",i.eqId),c.lastCommunication=e.moment().format(),p("equipments",c),s({type:"equipmentUpdate",payload:c});case 18:case"end":return a.stop()}}),a)})))()},getScenarios:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c("scenarios").map((function(e){return e.state="stop",e})));case 1:case"end":return e.stop()}}),e)})))()},changeScenarioState:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))()},getScenario:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",m("scenarios",e));case 1:case"end":return t.stop()}}),t)})))()},createScenario:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",d("scenarios",e));case 1:case"end":return t.stop()}}),t)})))()},updateScenario:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",p("scenarios",e));case 1:case"end":return t.stop()}}),t)})))()},deleteScenario:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",f("scenarios",e));case 1:case"end":return t.stop()}}),t)})))()},getStatistics:function(e){var t=arguments;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.length>1&&void 0!==t[1]?t[1]:null,t.length>2&&void 0!==t[2]?t[2]:null,a=m("states",e),n.abrupt("return",{min:Number.parseFloat(Number.parseFloat(a.currentValue*(1-Math.random())).toPrecision(3)),avg:Number.parseFloat(Number.parseFloat(a.currentValue*(.5+Math.random())).toPrecision(3)),max:Number.parseFloat(Number.parseFloat(a.currentValue*(1+Math.random())).toPrecision(3))});case 4:case"end":return n.stop()}}),n)})))()},getHistory:function(t){var n=arguments;return Object(a["a"])(regeneratorRuntime.mark((function a(){var r,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:for(n.length>1&&void 0!==n[1]?n[1]:null,n.length>2&&void 0!==n[2]?n[2]:null,r=m("states",t),i=[],s=0;s<48;s++)i.push({value:r.currentValue*(.5+Math.random()),date:e.moment().subtract(30*s,"minutes")});return a.abrupt("return",i);case 6:case"end":return a.stop()}}),a)})))()},getLogs:function(){var e=arguments;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.length>0&&void 0!==e[0]?e[0]:null,t.abrupt("return",c("logs"));case 2:case"end":return t.stop()}}),t)})))()},getJobs:function(){var e=arguments;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.length>0&&void 0!==e[0]?e[0]:null,t.abrupt("return",c("jobs"));case 2:case"end":return t.stop()}}),t)})))()},restartJobs:function(){var e=arguments;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.length>0&&void 0!==e[0]?e[0]:null,t.abrupt("return",c("jobs"));case 2:case"end":return t.stop()}}),t)})))()},getDatabaseCollections:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",["users","rooms","equipments","states","actions","scenarios"]);case 1:case"end":return e.stop()}}),e)})))()},getDatabaseBackup:function(e){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("Non géré sur la démo");case 1:case"end":return e.stop()}}),e)})))()},importDatabaseBackup:function(e){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:throw new Error("Non géré sur la démo");case 1:case"end":return e.stop()}}),e)})))()},askQuestion:function(e){var t=arguments;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.length>1&&void 0!==t[1]?t[1]:null,a=l("queries",{query:e}),!(a.length>0)){n.next=6;break}return n.abrupt("return",a[0].reply);case 6:return r=["Désolé, je n'ai pas compris la demande","Je ne comprends pas","Je ne sais pas traiter cette requête :("],n.abrupt("return",r[Math.floor(Math.random()*r.length)]);case 8:case"end":return n.stop()}}),n)})))()},getSentences:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c("queries").map((function(e){return e.query})));case 1:case"end":return e.stop()}}),e)})))()},getNotifications:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",c("notifications"));case 1:case"end":return e.stop()}}),e)})))()},clearNotifications:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:c("notifications").forEach((function(e){return f("notifications",e.id)}));case 1:case"end":return e.stop()}}),e)})))()}}}},caa4:function(e,t,n){"use strict";n.r(t),n.d(t,"JeedomApi",(function(){return o}));n("99af"),n("4de4"),n("4160"),n("d81d"),n("b0c0"),n("a9e3"),n("c35a"),n("d3b7"),n("ac1f"),n("466d"),n("5319"),n("1276"),n("159b"),n("ddb0");var a=n("5530"),r=(n("96cf"),n("1da1")),i=n("bc3a"),s=n.n(i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:864e5,u=3,c=5e3,l=null,m=null,d=null,p=0,f=!1,b=Date.now()/1e3;function g(e){var t=e.match(/class="(.*?)"/)[1];switch(t){case"fas fa-refresh":t="fa fa-sync-alt";break;case"fas fa-smile-o":t="far fa-smile";break}return t||"fa fa-question"}function h(e,t){return v.apply(this,arguments)}function v(){return v=Object(r["a"])(regeneratorRuntime.mark((function e(n,r){var i,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==l||"user::getHash"===n){e.next=2;break}throw new Error("Missing API key");case 2:return i={headers:{}},void 0===r&&(r={}),o={jsonrpc:"2.0",id:+new Date,method:n,params:r},o.params=Object(a["a"])(Object(a["a"])({},o.params),{apikey:l}),e.next=8,s.a.post(t,o,i);case 8:if(u=e.sent,!u.data.error){e.next=11;break}throw u.data.error;case 11:return e.abrupt("return",u.data.result);case 12:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function y(t){b=t.datetime;var n=[];t.result.forEach((function(t){switch(t.name){case"cmd::update":n.push({id:t.option.cmd_id,currentValue:t.option.value,collectDate:t.option.collectDate});break;case"jeeObject::summary::update":for(var a in t.option.keys)i.commit("data/saveRoomSummary",{id:t.option.object_id,key:a,value:t.option.keys[a].value});break;case"scenario::update":i.commit("data/updateScenario",{id:t.option.scenario_id,state:t.option.state});break;case"jeedom::alert":var r="is-danger";switch(t.option.level){case"success":r="is-success";break;case"info":r="is-info";break;case"warning":r="is-warning";break}i.commit("app/setInformation",{type:r,message:t.option.message});break;case"notify":var s="is-danger",o="";switch(t.option.category){case"message":s="is-info";break;default:break}t.option.title&&(o+="".concat(t.option.title,"<br>")),t.option.message&&(o+=t.option.message),i.commit("app/setInformation",{type:s,message:o}),i.commit("data/addNotification",{date:e.moment().format("YYYY-MM-DD HH:mm:ss"),message:t.option.message});break;default:break}})),n.length>0&&i.commit("data/updateStatesActions",n)}return{authenticate:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h("user::getHash",{login:e,password:t});case 3:return n.abrupt("return",n.sent);case 6:throw n.prev=6,n.t0=n["catch"](0),console.error(n.t0),n.t0;case 10:case"end":return n.stop()}}),n,null,[[0,6]])})))()},setAuthentication:function(e){l=e},getAllRoles:function(){return[]},getRoles:function(){return[]},getUserId:function(e){},openEventsListener:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i.state.app.hasNetwork){if(null!==n)return l?void(f?console.warn("Socket already opened"):(a&&this.openEventsListenerFallback(!1),f=!0,e&&(p=0),m=new WebSocket(n),m.onopen=function(e){console.info("Events socket connection opened");var t=JSON.stringify({apiKey:l});m.send(t),i.commit("app/setEventsListenerStatus",!0)},m.onmessage=function(e){try{y(JSON.parse(e.data))}catch(t){console.error("Error during events parsing",t)}},m.onerror=function(e){console.error("Error occurs on events socket",e),p++},m.onclose=function(e){switch(i.commit("app/setEventsListenerStatus",!1),f=!1,e.code){case 1e3:case 1001:break;case 1006:if(!i.state.app.hasNetwork)return void console.warn("Network failure, events socket connection closed (code: ".concat(e.code,", try #").concat(p,"/").concat(u,")"));if(p>=u)return console.warn("Events socket connection closed (code: ".concat(e.code,", try #").concat(p,"/").concat(u,")")),void t.openEventsListenerFallback(!0);console.warn("Events socket connection closed (code: ".concat(e.code,", try #").concat(p,"/").concat(u,"), reconnecting...")),t.openEventsListener(!1,!1);break;default:console.warn("Events socket connection closed (code: ".concat(e.code,", try #").concat(p,")"))}})):(console.warn("Missing API key"),i.commit("app/setInformation",{type:"is-danger",message:"Erreur d'authentification, veuillez-vous reconnecter"}),void i.commit("app/setUser",{login:null,isAuthenticated:!1}));this.openEventsListenerFallback(!0)}},closeEventsListener:function(){m&&m.close(),d&&(clearTimeout(d),i.commit("app/setEventsListenerStatus",!1))},openEventsListenerFallback:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,i.commit("app/setEventsListenerStatus",!0),n.next=4,h("event::changes",{datetime:b});case 4:return a=n.sent,b=a.datetime,y(a),e&&(d=setTimeout(function(){this.openEventsListenerFallback(!0)}.bind(t),c)),n.abrupt("return");case 11:n.prev=11,n.t0=n["catch"](0),i.commit("app/setEventsListenerStatus",!1),i.commit("app/setInformation",{type:"is-danger",message:"Erreur de communication avec le serveur"}),console.error(n.t0);case 16:case"end":return n.stop()}}),n,null,[[0,11]])})))()},getRooms:function(){return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h("object::full");case 3:return n=t.sent,t.abrupt("return",n.map((function(t){var n={id:t.id,name:t.name,parentId:t.father_id,isVisible:"1"===t.isVisible,summary:{},equipments:[]};for(var a in t.configuration.summary){var r=!1,i=t.configuration.summary[a];i.forEach((function(e){"1"===e.enable&&(r=!0)})),r&&(n.summary[a]=!0)}return n.equipments=t.eqLogics.filter((function(e){return"1"===e.isVisible})).map((function(t){var n={id:t.id,module:t.eqType_name,name:t.name,isVisible:!0,cmds:[],tags:t.tags?t.tags.split(","):[]};return t.configuration.type&&(n.configuration={type:t.configuration.type}),t.status&&(t.status.battery&&(n.battery=t.status.battery),(t.status.batterydanger||t.status.batterywarning)&&(n.hasLowBattery=!0),t.status.lastCommunication&&(n.lastCommunication=e.moment(t.status.lastCommunication).format()),(t.status.timeout||t.status.warning||t.status.danger)&&(n.hasNoCommunication=!0)),n.actions=t.cmds.filter((function(e){return"action"===e.type})).sort((function(e,t){return e.order-t.order})).map((function(e){var t={id:e.id,logicalId:e.logicalId,name:e.name,eqId:e.eqLogic_id,module:e.eqType,type:e.subType.replace("other","button"),isVisible:"1"===e.isVisible,order:e.order};switch(e.generic_type){case"LIGHT_OFF":case"ENERGY_OFF":t.type="switch_off";break;case"LIGHT_ON":case"ENERGY_ON":t.type="switch_on";break;case"LIGHT_TOGGLE":t.type="switch";break;case"LIGHT_SLIDER":t.type="slider";break}return e.display.icon&&(t.icon=g(e.display.icon)),e.value&&(t.stateFeedbackId=e.value.replace(/#/g,"")),e.configuration.minValue&&""!==e.configuration.minValue&&(t.minValue=parseInt(e.configuration.minValue)),e.configuration.maxValue&&""!==e.configuration.maxValue&&(t.maxValue=parseInt(e.configuration.maxValue)),e.configuration.listValue&&(t.options=e.configuration.listValue.split(";").map((function(e){var t=e.split("|");return{value:t[0],label:t[1]||t[0]}}))),t})),n.states=t.cmds.filter((function(e){return"info"===e.type})).sort((function(e,t){return e.order-t.order})).map((function(e){var t={id:e.id,logicalId:e.logicalId,name:e.name,eqId:e.eqLogic_id,module:e.eqType,type:e.subType.replace("binary","boolean"),genericType:e.generic_type,isHistorized:"1"===e.isHistorized,isVisible:"1"===e.isVisible,order:e.order,currentValue:e.state,unit:e.unite};return e.display.icon&&(t.icon=g(e.display.icon)),e.configuration.minValue&&""!==e.configuration.minValue&&(t.minValue=parseInt(e.configuration.minValue)),e.configuration.maxValue&&""!==e.configuration.maxValue&&(t.maxValue=parseInt(e.configuration.maxValue)),t})),n})),n})));case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getSummary:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("summary::global");case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e["catch"](0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},getRoomSummary:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h("summary::byId",{id:e,key:t});case 3:return n.abrupt("return",n.sent);case 6:n.prev=6,n.t0=n["catch"](0),console.error(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))()},executeAction:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={id:e},t&&(a.options=t),n.prev=2,n.next=5,h("cmd::execCmd",a);case 5:return n.abrupt("return",n.sent);case 8:throw n.prev=8,n.t0=n["catch"](2),console.error(n.t0),n.t0;case 12:case"end":return n.stop()}}),n,null,[[2,8]])})))()},getScenarios:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("scenario::all");case 3:return t=e.sent,e.abrupt("return",t.filter((function(e){return"1"===e.isVisible&&"1"===e.isActive})).map((function(e){return e.isVisible=!0,e.isActive=!0,e.name=e.display.name,delete e.display,e})));case 7:throw e.prev=7,e.t0=e["catch"](0),console.error(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},changeScenarioState:function(e,t){return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h("scenario::changeState",{id:e,state:t});case 3:return n.abrupt("return",n.sent);case 6:throw n.prev=6,n.t0=n["catch"](0),console.error(n.t0),n.t0;case 10:case"end":return n.stop()}}),n,null,[[0,6]])})))()},getStatistics:function(t){var n=arguments;return Object(r["a"])(regeneratorRuntime.mark((function a(){var r,i,s,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:null,i=n.length>2&&void 0!==n[2]?n[2]:null,s={id:parseInt(t)},null===i&&(i=new Date),null===r&&(r=new Date(i.getTime()-o)),s.startTime=e.moment(r).format("YYYY-MM-DD HH:mm:ss"),s.endTime=e.moment(i).format("YYYY-MM-DD HH:mm:ss"),a.prev=7,a.next=10,h("cmd::getStatistique",s);case 10:if(u=a.sent,"0"!==u.count){a.next=13;break}return a.abrupt("return",null);case 13:return a.abrupt("return",{min:Number.parseFloat(Number.parseFloat(u.min).toPrecision(3)),avg:Number.parseFloat(Number.parseFloat(u.avg).toPrecision(3)),max:Number.parseFloat(Number.parseFloat(u.max).toPrecision(3))});case 16:throw a.prev=16,a.t0=a["catch"](7),console.error(a.t0),a.t0;case 20:case"end":return a.stop()}}),a,null,[[7,16]])})))()},getHistory:function(t){var n=arguments;return Object(r["a"])(regeneratorRuntime.mark((function a(){var r,i,s,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:null,i=n.length>2&&void 0!==n[2]?n[2]:null,s={id:parseInt(t)},null===i&&(i=new Date),null===r&&(r=new Date(i.getTime()-864e5)),s.startTime=e.moment(r).format("YYYY-MM-DD HH:mm:ss"),s.endTime=e.moment(i).format("YYYY-MM-DD HH:mm:ss"),a.prev=7,a.next=10,h("cmd::getHistory",s);case 10:return o=a.sent,a.abrupt("return",o.map((function(t){return{value:t.value,date:e.moment(t.datetime)}})));case 14:throw a.prev=14,a.t0=a["catch"](7),console.error(a.t0),a.t0;case 18:case"end":return a.stop()}}),a,null,[[7,14]])})))()},askQuestion:function(e){var t=arguments;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.length>1&&void 0!==t[1]?t[1]:null,r={query:e},null!==a&&(r.reply_cmd=a),n.prev=3,n.next=6,h("interact::tryToReply",r);case 6:if(i=n.sent,i.reply){n.next=10;break}throw console.error("no reply found"),new Error("Aucune réponse trouvée");case 10:return n.abrupt("return",i.reply.replace(/(\\+n)+/g,"<br/>"));case 13:throw n.prev=13,n.t0=n["catch"](3),console.error(n.t0),n.t0;case 17:case"end":return n.stop()}}),n,null,[[3,13]])})))()},getSentences:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("interactQuery::all");case 3:return t=e.sent,e.abrupt("return",t.map((function(e){return e.query})));case 7:throw e.prev=7,e.t0=e["catch"](0),console.error(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getNotifications:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("message::all");case 3:return t=e.sent,e.abrupt("return",t.map((function(e){var t=document.createElement("textarea");return t.innerHTML=e.message,e.message=t.value,e})));case 7:throw e.prev=7,e.t0=e["catch"](0),console.error(e.t0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},clearNotifications:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h("message::removeAll");case 3:if(t=e.sent,"ok"===t){e.next=6;break}throw new Error("Erreur lors de la suppression");case 6:e.next=12;break;case 8:throw e.prev=8,e.t0=e["catch"](0),console.error(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()}}}},cd32:function(e,t,n){"use strict";n.r(t);var a,r,i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.attributes.states,(function(t){return n("info",{key:t,attrs:{id:t,"equipment-id":e.equipment.id}})})),e.attributes.actions.length>0?n("div",{staticClass:"is-flex-space-between has-margin-bottom-8"},[e._m(0),n("span",{staticClass:"buttons is-right has-addons is-flex-grow"},e._l(e.attributes.actions,(function(e){return n("action",{key:e,attrs:{id:e}})})),1)]):e._e()],2)},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("i",{staticClass:"fa-fw fa fa-tools has-margin-right-6"}),e._v("Actions")])}],o=(n("4de4"),n("7db0"),n("4160"),n("caad"),n("159b"),n("5530")),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"button"===e.action.type?n("button",{staticClass:"button is-rounded is-primary is-light",attrs:{title:e.action.name},on:{click:e.execute}},[n("span",{staticClass:"icon is-icon-mobile"},[n("i",{class:e.iconClass})]),n("span",{staticClass:"is-hidden-mobile"},[e._v(e._s(e.action.name))])]):"slider"===e.action.type?n("b-slider",{staticClass:"has-margin-left-4 has-margin-top-8",attrs:{lazy:"",title:e.action.name},on:{change:e.actionSlider},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):"select"===e.action.type?n("div",{staticClass:"select has-margin-left-4 has-margin-top-8",attrs:{lazy:"",title:e.action.name}},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?n:n[0]},e.actionSelect]}},e._l(e.action.options,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.label||t.value))])})),0)]):"switch"===e.action.type?n("b-switch",{staticClass:"has-margin-bottom-8",attrs:{"true-value":1,"false-value":0,title:e.action.name},on:{input:e.actionSwitch},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):n("span",[e._v(e._s(e.action))])},c=[],l=n("647b"),m={mixins:[l["a"]],props:{id:{type:String,required:!0}},computed:{value:{get:function(){return this.action.currentValue},set:function(){}},action:function(){return this.getActionById(this.id)},iconClass:function(){return this.getIconClass(this.action)}},methods:{execute:function(){this.executeAction({id:this.action.id})},actionSlider:function(e){this.executeAction({id:this.action.id,options:{slider:e}})},actionSelect:function(e){this.executeAction({id:this.action.id,options:{select:e.target.value}})},actionSwitch:function(e){this.executeAction({id:this.action.id,options:{params:{value:e}}})}}},d=m,p=n("2877"),f=Object(p["a"])(d,u,c,!1,null,null,null),b=f.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"is-flex-space-between has-margin-bottom-8"},[n("span",[n("i",{staticClass:"fa-fw has-margin-right-6",class:e.iconClass}),e._v(e._s(e.state.name)),e.state.isHistorized?n("a",{staticClass:"has-margin-left-8 has-text-grey-light",attrs:{title:"Voir l'historique"},on:{click:function(t){e.hasHistoryDisplayed=!0}}},[n("i",{staticClass:"fa fa-fw fa-chart-area"})]):e._e()]),"boolean"===e.state.type?n("b-switch",{staticClass:"has-margin-bottom-8",attrs:{disabled:!e.action,"true-value":1,"false-value":0,title:e.state.name},on:{input:e.action},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):"string"===e.state.type&&e.action?n("div",{staticClass:"select has-margin-left-4",attrs:{lazy:"",title:e.state.name}},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?n:n[0]},e.action]}},e._l(e.actionOptions,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v(e._s(t.label||t.value))])})),0)]):n("span",{staticClass:"is-flex-space-between"},[e.statistics?n("ul",{staticClass:"has-text-grey-light is-size-7 has-text-weight-light"},[n("li",{staticClass:"statistics-item"},[n("span",{staticClass:"has-padding-horizontal-8",attrs:{title:"Min"}},[e._v(e._s(e.statistics.min))])]),n("li",{staticClass:"statistics-item"},[n("span",{staticClass:"has-padding-horizontal-8",attrs:{title:"Moyenne"}},[e._v(e._s(e.statistics.avg))])]),n("li",{staticClass:"statistics-item"},[n("span",{staticClass:"has-padding-horizontal-8",attrs:{title:"Max"}},[e._v(e._s(e.statistics.max))])])]):e._e(),"WIND_DIRECTION"===e.state.genericType?n("i",{staticClass:"fa fa-location-arrow has-margin-right-8",style:"transform: rotate("+(135+parseInt(e.state.currentValue))+"deg);"}):e._e(),n("span",{staticClass:"has-text-weight-semi-bold"},[e._v(e._s(e.state.currentValue)+e._s(e.unit))])])],1),e.hasHistoryDisplayed?n("div",{staticClass:"message is-light"},[n("div",{staticClass:"message-header is-size-7"},[e._v(" Historique "),n("button",{staticClass:"delete",attrs:{title:"Fermer"},on:{click:function(t){e.hasHistoryDisplayed=!1}}})]),n("div",{staticClass:"message-body has-margin-bottom-7 has-padding-8"},[n("history",{attrs:{id:e.state.id,name:e.state.name}})],1)]):e._e()])},h=[],v=(n("96cf"),n("1da1")),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"field is-horizontal"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field",attrs:{title:"Date de début"}},[n("b-datetimepicker",{attrs:{"max-datetime":e.today,size:"is-small"},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}})],1),n("div",{staticClass:"field",attrs:{title:"Date de fin"}},[n("b-datetimepicker",{attrs:{"max-datetime":e.today,size:"is-small"},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),n("div",{staticClass:"field"},[n("button",{staticClass:"button is-primary is-rounded is-small",on:{click:e.getHistory}},[e._m(0),n("span",[e._v("Rafraichir")])])])])]),e.loaded?n("chart",{attrs:{"chart-data":e.history}}):e._e()],1)},w=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon"},[n("i",{staticClass:"fa fa-sync-alt"})])}],k=(n("d81d"),n("b0c0"),n("1fca")),x=k["b"].reactiveProp,I={extends:k["a"],mixins:[x],props:{chartData:{type:Object,required:!0},options:{type:Object,required:!1,default:function(){return{legend:{display:!1},maintainAspectRatio:!1,spanGaps:!1,elements:{line:{tension:0,backgroundColor:"rgba(150, 201, 39, 0.5)",borderColor:"rgb(150, 201, 39)"},point:{backgroundColor:"rgba(150, 201, 39, 0.8)",radius:2}},scales:{xAxes:[{type:"time",time:{tooltipFormat:"llll",displayFormats:{second:"LTS",minute:"LT",hour:"LT",day:"DD/MM"}}}]}}}}},mounted:function(){this.renderChart(this.chartData,this.options)}},R=I,O=Object(p["a"])(R,a,r,!1,null,null,null),C=O.exports,q={components:{Chart:C},props:{id:{type:String,required:!0},name:{type:String,required:!0}},data:function(){return{startDate:null,endDate:null,history:null,loaded:!1}},computed:{today:function(){return new Date}},created:function(){this.endDate=new Date,this.startDate=new Date(this.endDate.getTime()-864e5),this.getHistory()},methods:{getHistory:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Provider.getHistory(e.id,e.startDate,e.endDate);case 2:n=t.sent,e.history={datasets:[{label:e.name,data:n.map((function(e){return e.value}))}],labels:n.map((function(e){return e.date}))},e.loaded=!0;case 5:case"end":return t.stop()}}),t)})))()}}},E=q,j=Object(p["a"])(E,y,w,!1,null,null,null),S=j.exports,_={components:{History:S},mixins:[l["a"]],props:{id:{type:String,required:!0},equipmentId:{type:String,required:!0}},data:function(){return{hasHistoryDisplayed:!1}},computed:{state:function(){return this.getStateById(this.id)},value:{get:function(){return this.state.currentValue},set:function(){}},iconClass:function(){return this.getIconClass(this.state)},unit:function(){return this.state.unit?" "+this.state.unit:""},action:function(){var e=this,t=this.getActionsByEquipmentId(this.equipmentId),n=t.find((function(t){return t.stateFeedbackId===e.state.id&&"switch_on"===t.type})),a=t.find((function(t){return t.stateFeedbackId===e.state.id&&"switch_off"===t.type})),r=t.find((function(t){return t.stateFeedbackId===e.state.id&&"switch"===t.type})),i=t.find((function(t){return t.stateFeedbackId===e.state.id&&"select"===t.type}));if(n&&a||r||i){var s=this;return r?function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.executeAction({id:r.id,options:{value:t}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():i?function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.executeAction({id:i.id,options:{select:t.target.value}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=1===t?n.id:a.id,s.executeAction({id:r});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},actionOptions:function(){var e=this,t=this.getActionsByEquipmentId(this.equipmentId),n=t.find((function(t){return t.stateFeedbackId===e.state.id&&"select"===t.type}));return n&&n.options?n.options:[]},statistics:function(){return this.getStateStatisticsById(this.id)}},created:function(){this.state.isHistorized&&"boolean"!==this.state.type&&this.loadStateStatistics(this.state.id)}},A=_,V=(n("07fc"),Object(p["a"])(A,g,h,!1,null,null,null)),T=V.exports,N=n("2f62"),L=Object(N["a"])("data"),P=L.mapGetters,D={components:{Action:b,Info:T},mixins:[l["a"]],props:{equipment:{type:Object,required:!0}},computed:Object(o["a"])({attributes:function(){var e=[],t=[],n=[],a=this.getActionsByIds(this.equipment.actions).filter((function(e){return e.isVisible}));return this.getStatesByIds(this.equipment.states).filter((function(e){return e.isVisible})).forEach((function(e){if("boolean"===e.type){var r=a.find((function(t){return t.stateFeedbackId===e.id&&"switch_on"===t.type})),i=a.find((function(t){return t.stateFeedbackId===e.id&&"switch_off"===t.type})),s=a.find((function(t){return t.stateFeedbackId===e.id&&"switch"===t.type}));r&&i&&t.push(r.id,i.id),s&&t.push(s.id),n.push(e.id)}else if("numeric"===e.type)a.find((function(t){return t.stateFeedbackId===e.id&&"slider"===t.type}))||n.push(e.id);else if("string"===e.type){var o=a.find((function(t){return t.stateFeedbackId===e.id&&"select"===t.type}));o&&t.push(o.id),n.push(e.id)}})),a.forEach((function(n){t.includes(n.id)||e.push(n.id)})),{states:n,actions:e}}},P(["getEquipmentById"]))},$=D,M=Object(p["a"])($,i,s,!1,null,null,null);t["default"]=M.exports},d09c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l([0,1],(function(e){return n("div",{key:e,staticClass:"is-flex-space-between has-margin-bottom-6"},[n("span",{staticClass:"loading-info"})])})),0)},r=[],i=n("2877"),s={},o=Object(i["a"])(s,a,r,!1,null,null,null);t["default"]=o.exports},fbf5:function(e,t,n){e.exports=n.p+"img/home.43c4f82c.png"}});
//# sourceMappingURL=app.a24cff7f.js.map