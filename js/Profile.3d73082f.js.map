{"version":3,"sources":["webpack:///./src/components/Profile.vue?86b7","webpack:///src/components/Profile.vue","webpack:///./src/components/Profile.vue?ab14","webpack:///./src/components/Profile.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","link","name","icon","text","isActive","_m","directives","rawName","value","user","expression","domProps","on","$event","target","composing","$set","updateUser","_v","updatePassword","_l","token","key","id","_s","_f","issuedDate","userAgent","ip","deleteToken","staticRenderFns","components","Breadcrumb","data","tokens","computed","mounted","getProfile","getTokens","methods","component"],"mappings":"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","file":"js/Profile.3d73082f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"hero\"},[_c('div',{staticClass:\"hero-head\"},[_c('breadcrumb',{attrs:{\"items\":[{link: {name: 'profile'}, icon: 'fa-user', text: 'Profile', isActive: true}]}})],1),_c('div',{staticClass:\"hero-body has-padding-horizontal-7\"},[_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"card has-margin-bottom-6\"},[_vm._m(0),_c('section',{staticClass:\"card-content\"},[_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control has-icons-left\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.login),expression:\"user.login\"}],staticClass:\"input\",attrs:{\"type\":\"text\",\"placeholder\":\"Nom d'utilisateur\"},domProps:{\"value\":(_vm.user.login)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"login\", $event.target.value)}}}),_vm._m(1)])]),_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control has-icons-left\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.email),expression:\"user.email\"}],staticClass:\"input\",attrs:{\"type\":\"email\",\"placeholder\":\"Adresse mail\"},domProps:{\"value\":(_vm.user.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"email\", $event.target.value)}}}),_vm._m(2)])]),_c('div',{staticClass:\"field\"},[_c('div',{staticClass:\"control\"},[_c('button',{staticClass:\"button is-primary\",on:{\"click\":_vm.updateUser}},[_vm._m(3),_c('span',[_vm._v(\"Sauvegarder\")])])])])])]),_c('div',{staticClass:\"card has-margin-bottom-6\"},[_vm._m(4),_c('section',{staticClass:\"card-content\"},[_c('div',{staticClass:\"field has-addons\"},[_c('div',{staticClass:\"control has-icons-left is-expanded\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.password),expression:\"user.password\"}],staticClass:\"input\",attrs:{\"type\":\"password\",\"placeholder\":\"Password\"},domProps:{\"value\":(_vm.user.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"password\", $event.target.value)}}}),_vm._m(5)]),_c('div',{staticClass:\"control\"},[_c('button',{staticClass:\"button is-primary\",on:{\"click\":_vm.updatePassword}},[_vm._m(6),_c('span',[_vm._v(\"Sauvegarder\")])])])]),_c('table',{staticClass:\"table is-fullwidth\"},[_vm._m(7),_c('tbody',_vm._l((_vm.tokens),function(token){return _c('tr',{key:token.id},[_c('td',[_vm._v(_vm._s(_vm._f(\"moment\")(token.issuedDate,'LLLL')))]),_c('td',[_vm._v(_vm._s(token.userAgent))]),_c('td',[_vm._v(_vm._s(token.ip))]),_c('td',{staticClass:\"has-text-centered\"},[_c('button',{staticClass:\"button is-danger is-light is-small\",on:{\"click\":function($event){return _vm.deleteToken(token.id)}}},[_c('i',{staticClass:\"fa fa-trash\"})])])])}),0)])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"card-header\"},[_c('p',{staticClass:\"card-header-title\"},[_c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-user-edit\"})]),_c('span',[_vm._v(\"Mes informations\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon is-small is-left\"},[_c('i',{staticClass:\"fas fa-user\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon is-small is-left\"},[_c('i',{staticClass:\"fas fa-envelope\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-save\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"card-header\"},[_c('p',{staticClass:\"card-header-title\"},[_c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-user-shield\"})]),_c('span',[_vm._v(\"Sécurité\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon is-small is-left\"},[_c('i',{staticClass:\"fas fa-key\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\"},[_c('i',{staticClass:\"fa fa-save\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"Date d'autorisation\")]),_c('th',[_vm._v(\"User agent\")]),_c('th',[_vm._v(\"Adresse IP\")]),_c('th',{staticClass:\"has-text-centered\"},[_vm._v(\"Révoquer\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <section class=\"hero\">\n    <div class=\"hero-head\">\n      <breadcrumb :items=\"[{link: {name: 'profile'}, icon: 'fa-user', text: 'Profile', isActive: true}]\" />\n    </div>\n    <div class=\"hero-body has-padding-horizontal-7\">\n      <div class=\"container\">\n\n        <div class=\"card has-margin-bottom-6\">\n          <header class=\"card-header\">\n            <p class=\"card-header-title\">\n              <span class=\"icon\"><i class=\"fa fa-user-edit\" /></span><span>Mes informations</span>\n            </p>\n          </header>\n          <section class=\"card-content\">\n            <div class=\"field\">\n              <div class=\"control has-icons-left\">\n                <input v-model=\"user.login\" class=\"input\" type=\"text\" placeholder=\"Nom d'utilisateur\">\n                <span class=\"icon is-small is-left\">\n                  <i class=\"fas fa-user\" />\n                </span>\n              </div>\n            </div>\n            <div class=\"field\">\n              <div class=\"control has-icons-left\">\n                <input v-model=\"user.email\" class=\"input\" type=\"email\" placeholder=\"Adresse mail\">\n                <span class=\"icon is-small is-left\">\n                  <i class=\"fas fa-envelope\" />\n                </span>\n              </div>\n            </div>\n            <div class=\"field\">\n              <div class=\"control\">\n                <button class=\"button is-primary\" @click=\"updateUser\">\n                  <span class=\"icon\"><i class=\"fa fa-save\" /></span><span>Sauvegarder</span>\n                </button>\n              </div>\n            </div>\n          </section>\n        </div>\n\n        <div class=\"card has-margin-bottom-6\">\n          <header class=\"card-header\">\n            <p class=\"card-header-title\">\n              <span class=\"icon\"><i class=\"fa fa-user-shield\" /></span><span>Sécurité</span>\n            </p>\n          </header>\n          <section class=\"card-content\">\n            <div class=\"field has-addons\">\n              <div class=\"control has-icons-left is-expanded\">\n                <input v-model=\"user.password\" class=\"input\" type=\"password\" placeholder=\"Password\">\n                <span class=\"icon is-small is-left\">\n                  <i class=\"fas fa-key\" />\n                </span>\n              </div>\n              <div class=\"control\">\n                <button class=\"button is-primary\" @click=\"updatePassword\">\n                  <span class=\"icon\"><i class=\"fa fa-save\" /></span><span>Sauvegarder</span>\n                </button>\n              </div>\n            </div>\n            <table class=\"table is-fullwidth\">\n              <thead>\n                <tr>\n                  <th>Date d'autorisation</th>\n                  <th>User agent</th>\n                  <th>Adresse IP</th>\n                  <th class=\"has-text-centered\">Révoquer</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"token in tokens\" :key=\"token.id\">\n                  <td>{{ token.issuedDate | moment('LLLL') }}</td>\n                  <td>{{ token.userAgent }}</td>\n                  <td>{{ token.ip }}</td>\n                  <td class=\"has-text-centered\"><button class=\"button is-danger is-light is-small\" @click=\"deleteToken(token.id)\"><i class=\"fa fa-trash\" /></button></td>\n                </tr>\n              </tbody>\n            </table>\n          </section>\n\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script>\nimport Breadcrumb from '@/components/Breadcrumb'\nimport { createNamespacedHelpers } from 'vuex'\nconst { mapState } = createNamespacedHelpers('app')\n\nexport default {\n  name: 'Profile',\n  components: {\n    Breadcrumb,\n  },\n  data () {\n    return {\n      user: {},\n      tokens: [],\n    }\n  },\n  computed: {\n    ...mapState(['id']),\n  },\n  mounted () {\n    this.getProfile()\n    this.getTokens()\n  },\n  methods: {\n    async getProfile () {\n      this.user = await this.$Provider.getUser(this.id)\n    },\n    async getTokens () {\n      this.tokens = await this.$Provider.getUserTokens(this.id)\n    },\n    async updateUser () {\n      const _user = Object.assign({}, this.user)\n      delete _user.password\n      delete _user.modificationDate\n      try {\n        this.user = await this.$Provider.updateUser(_user)\n      } catch (error) {\n        console.error(error)\n        this.$store.commit('app/setInformation', { type: 'is-danger', message: error.message })\n      }\n    },\n    async updatePassword () {\n      try {\n        await this.$Provider.updateUserPassword(this.user.id, this.user.password)\n        this.user.password = undefined\n      } catch (error) {\n        console.error(error)\n        this.$store.commit('app/setInformation', { type: 'is-danger', message: error.message })\n      }\n    },\n    async deleteToken (tokenId) {\n      try {\n        await this.$Provider.deleteUserToken(this.id, tokenId)\n        this.tokens.splice(this.tokens.findIndex((token) => token.id === tokenId), 1)\n      } catch (error) {\n        console.error(error)\n        this.$store.commit('app/setInformation', { type: 'is-danger', message: error.message })\n      }\n    },\n  },\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=92ee7d3e&\"\nimport script from \"./Profile.vue?vue&type=script&lang=js&\"\nexport * from \"./Profile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}